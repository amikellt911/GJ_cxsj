!function(c){function e(e){for(var t,n,a=e[0],i=e[1],o=e[2],r=0,s=[];r<a.length;r++)n=a[r],Object.prototype.hasOwnProperty.call(d,n)&&d[n]&&s.push(d[n][0]),d[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(c[t]=i[t]);for(f&&f(e);s.length;)s.shift()();return u.push.apply(u,o||[]),l()}function l(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==d[o]&&(a=!1)}a&&(u.splice(t--,1),e=r(r.s=n[0]))}return e}var n={},d={9:0,14:0},u=[];function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=c,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="${staticServePath}/";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var f=a;u.push([45,1,0,2]),l()}([,function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return p}),n.d(t,"b",function(){return o}),n.d(t,"g",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"h",function(){return d});var a=n(0),u=n.n(a),i=n(5),f=n(2),o=function(e,t,n){e.click(function(){t[0].select();try{document.execCommand("copy")&&n&&n()}catch(e){console.log("Oops, unable to copy")}window.getSelection().removeAllRanges()})},r=function(e){if(Label.mouseEffects||e){var o=0;u()("html").click(function(e){var t,n=18;10==++o?t=u()("<b></b>").text("OωO"):20===o?t=u()("<b></b>").text("(๑•́ ∀ •̀๑)"):30===o?t=u()("<b></b>").text("(๑•́ ₃ •̀๑)"):40===o?t=u()("<b></b>").text("(๑•̀_•́๑)"):50===o?t=u()("<b></b>").text("（￣へ￣）"):60===o?t=u()("<b></b>").text("(╯°口°)╯(┴—┴"):70===o?t=u()("<b></b>").text("૮( ᵒ̌皿ᵒ̌ )ა"):80===o?t=u()("<b></b>").text("╮(｡>口<｡)╭"):90===o?t=u()("<b></b>").text("( ง ᵒ̌皿ᵒ̌)ง⁼³₌₃"):100<=o&&o<=105?t=u()("<b></b>").text("(ꐦ°᷄д°᷅)"):(t=u()('<svg><use xlink:href="#iconHeart"></use></svg>'),n=Math.round(14*Math.random()+6));var a=e.pageX,i=e.pageY;t.css({"z-index":9999,top:i-20,left:a,position:"absolute",color:"#E94F06","font-size":n,"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none"}),u()("body").append(t),t.animate({top:i-180,opacity:0},1500,function(){t.remove()})})}},s=function(){console.log(Label.consoleDebugInfo1,"font-size:96px;color:#3b3e43","font-size:12px;color:#4285f4")},m=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},h=function(e){Object(i.a)({title:Label.tipLabel,width:300,content:e})},c=function(e,t,n){Object(i.a)({title:Label.tipLabel,width:300,content:"<div>\n<div>".concat(e,'</div>\n<br>\n<div class="fn__flex-inline fn__right">\n  <button id="confirmBtn" class="btn btn--confirm">').concat(Label.certainLabel,'</button>\n  <button id="confirmCancelBtn" class="btn btn--cancel">').concat(Label.cancelLabel,"</button>\n</div>\n</div>")}),t&&u()("#confirmBtn").click(function(){t(),u()(".dialog").remove()}),u()("#confirmCancelBtn").click(function(){u()(".dialog").remove(),n&&n()})},l=function(e,t,n,a){var i=1<arguments.length&&void 0!==t?t:10,o=2<arguments.length?n:void 0,r=3<arguments.length?a:void 0;if(e)if(e.size>i)h("This image is too large (max "+i/1024/1024+"M)");else if(/^image\/\w+$/.test(e.type)){var s=new FormData;s.append("file",e),u.a.ajax(Label.servePath+r,{method:"POST",data:s,processData:!1,contentType:!1,success:function(e){0===e.code?o(e.data):h(e.msg||"Error Code: ".concat(e.code))},error:function(){h("Upload error")}})}else h("Image only~")},d=function(e,t){var n="rgba("+(1<t.charAt(4)?1:t.charAt(4))+t.charAt(5)+t.charAt(6)+", "+(1<t.charAt(7)?1:t.charAt(7))+t.charAt(8)+t.charAt(9)+", "+(1<t.charAt(10)?1:t.charAt(10))+t.charAt(11)+t.charAt(12)+", .36)";return e.css("background-image","linear-gradient(90deg, "+n+", rgba(255, 255, 255, 0.76), "+n+")"),n},p=function(e,n,a,i,t,o){var r=4<arguments.length&&void 0!==t?t:u()(".listAjax"),s=5<arguments.length?o:void 0;if(u()(window).unbind("scroll"),0!==r.length&&(-1<location.pathname.indexOf("/recent")||-1<location.pathname.indexOf("/domain")||-1<location.pathname.indexOf("/qna")||-1<location.pathname.indexOf("/tag")||-1<location.pathname.indexOf("/city")||0===location.pathname.indexOf("/search"))){var c=e||parseInt(m("p")||1),l=u()(window).height(),d=!1;u()(window).scroll(function(){var e=r.height()+15+r[0].offsetTop-u()(this).scrollTop();if(e<1.5*l&&!d&&0<e){a&&i&&0<r.find("."+i).length?r.append(a):r.append(n),d=!0;var t="".concat(Label.servePath).concat(location.pathname,"?ajax=true&p=").concat(c+1);0===location.pathname.indexOf("/search")&&(t="".concat(Label.servePath,"/search?scrollId=").concat(c)),u.a.ajax({url:t,type:"GET",complete:function(e){if(0===e.responseJSON.sc){if(""===e.responseJSON.contentHTML||e.responseJSON.paginationPageCount<=c)return void u()(".listMask").remove();d=!1,0===location.pathname.indexOf("/search")?c=e.responseJSON.scrollId:c+=1,r.append(e.responseJSON.contentHTML),u()(".listMask").remove(),Object(f.a)(),Object(f.b)(),s&&s()}else h(e.responseJSON.msg)}})}})}}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return r});var a=n(0),s=n.n(a),i=function(){function t(e){var t=document.createElement("img");t.src=e.getAttribute("data-src");var n=s()(e);t.addEventListener("load",function(){n.attr("style")||n.attr("class")||n.attr("width")||n.attr("height")||1!==n.closest(".vditor-reset").length||t.naturalHeight>t.naturalWidth&&t.naturalWidth/t.naturalHeight<n.closest(".vditor-reset").width()/(s()(window).height()-40)&&t.naturalHeight>s()(window).height()-40&&(e.style.height=s()(window).height()-40+"px"),e.src=t.src,e.style.backgroundImage="none",e.style.backgroundColor="transparent",n.attr("class")&&"img--filter"!==n.attr("class")||1!==n.closest(".vditor-reset").length||"A"===e.parentElement.tagName||function(e){var t=e[0];e.wrap('<span class="vditor-reset__preview"></span>'),238<=t.width&&60<=t.height&&(t.width===t.naturalWidth?e.after('<div class="fn__flex-inline">\n<svg><use xlink:href="#iconPhotoActual"></use></svg>\n<span class="fn__space5"></span>'.concat(t.width," x ").concat(t.height,"</div>")):e.after('<div class="fn__flex-inline">\n<svg><use xlink:href="#iconPhoto"></use></svg>\n<span class="fn__space5"></span>'.concat(t.width," x ").concat(t.height,'<span class="fn__space5"></span><span class="fn__space5"></span>\n<svg><use xlink:href="#iconPhotoActual"></use></svg>\n<span class="fn__space5"></span>').concat(t.naturalWidth," x ").concat(t.naturalHeight,"</div>")))}(n)}),t.addEventListener("error",function(){e.src="".concat(Label.staticServePath,"/images/img404.png"),e.style.backgroundImage="none",e.style.backgroundColor="transparent"}),e.removeAttribute("data-src")}if(!("IntersectionObserver"in window))return s()("img").each(function(){this.getAttribute("data-src")&&t(this)}),!1;window.imageIntersectionObserver?window.imageIntersectionObserver.disconnect():window.imageIntersectionObserver=new IntersectionObserver(function(e){e.forEach(function(e){(void 0===e.isIntersecting?0!==e.intersectionRatio:e.isIntersecting)&&e.target.getAttribute("data-src")&&t(e.target)})}),s()("img").each(function(){window.imageIntersectionObserver.observe(this)})},o=function(){function t(e){var t=document.createElement("img");t.src=e.getAttribute("data-src"),t.addEventListener("load",function(){e.style.backgroundImage="url("+t.src+")"}),t.addEventListener("error",function(){e.style.backgroundImage="url(".concat(Label.staticServePath,"/images/img404.png)")}),e.removeAttribute("data-src")}var e=s()("*[data-src]");"IntersectionObserver"in window?(window.CSSImageIntersectionObserver?window.CSSImageIntersectionObserver.disconnect():window.CSSImageIntersectionObserver=new IntersectionObserver(function(e){e.forEach(function(e){(void 0===e.isIntersecting?0!==e.intersectionRatio:e.isIntersecting)&&e.target.getAttribute("data-src")&&"img"!==e.target.tagName.toLocaleLowerCase()&&t(e.target)})}),e.each(function(){"img"!==this.tagName.toLowerCase()&&window.CSSImageIntersectionObserver.observe(this)})):e.each(function(){"img"!==this.tagName.toLowerCase()&&this.getAttribute("data-src")&&t(this)})},r=function(){s()(window).keyup(function(e){27===e.keyCode&&s()(".img-preview").remove()}),s()("body").on("click",".vditor-reset .vditor-reset__preview",function(){var e=s()(this).find("img"),t=e[0],n=this.offsetTop,a=this.offsetLeft;s()("body").append('<div class="img-preview">\n<div class="img-preview__bar">\n  <a class="fn__pointer fn__flex-inline"\n   href="'.concat(e.attr("src").split("?imageView2")[0],'" target="_blank" rel="noopener">\n    <svg><use xlink:href="#iconPhotoActual"></use></svg>\n    <span class="fn__space5"></span>').concat(Label.openOrgImgLabel," [").concat(t.naturalWidth," x ").concat(t.naturalHeight,']\n  </a>\n  <span class="fn__pointer fn__flex-inline imgPreviewRevolveBtn" data-deg="0">\n    <svg><use xlink:href="#iconRevolve"></use></svg>\n    <span class="fn__space5"></span>').concat(Label.revolveLabel,'\n  </span>\n  <a class="fn__pointer fn__flex-inline" rel="noopener" target="_blank" href="').concat(e.attr("src").split("?imageView2")[0],'?attname=">\n    <svg><use xlink:href="#iconDownload"></use></svg>\n    <span class="fn__space5"></span>').concat(Label.downloadLabel,'\n  </a>\n  <a class="fn__pointer fn__flex-inline" href="').concat(Label.servePath,'/settings/file">\n    <svg><use xlink:href="#iconArticles"></use></svg>\n    <span class="fn__space5"></span>').concat(Label.myFileLabel,'\n  </a>\n  <span class="fn__pointer fn__flex-inline"  onclick="this.parentElement.parentElement.outerHTML = \'\'">\n    <svg><use xlink:href="#iconClose"></use></svg>\n    <span class="fn__space5"></span>').concat(Label.closeLabel,'\n  </span>\n</div>\n<div class="img-preview__img" onclick="this.parentElement.outerHTML = \'\'">\n  <img style="transform: translate3d(').concat(Math.max(0,a),"px, ").concat(Math.max(0,n-s()(window).scrollTop()),'px, 0)"\n   src="').concat(e.attr("src"),'">\n</div></div>'));var i=s()(".img-preview__bar").height();s()(".img-preview__img").css("padding-top",i+"px");var o=s()(".img-preview__img img");o.css("transform","translate3d("+Math.max(0,s()(window).width()-t.naturalWidth)/2+"px, "+Math.max(0,s()(window).height()-i-t.naturalHeight)/2+"px, 0)"),o.width()===t.naturalWidth&&o.height()===t.naturalHeight||s()(".img-preview .img-preview__bar").prepend('<span class="fn__flex-inline">\n    <svg><use xlink:href="#iconPhoto"></use></svg>\n    <span class="fn__space5"></span>'.concat(o.width()," x ").concat(o.height(),"\n  </span>"));var r=s()(".imgPreviewRevolveBtn");r.click(function(){var e=s()(".img-preview__img"),t=e.find("img");switch(parseInt(r.data("deg"))){case 0:t.css("transform","translate3d("+Math.max(0,s()(window).width()-t.width())/2+"px, "+((t.width()-e.height())/2+Math.max(0,s()(window).height()-i-t.height())/2)+"px, 0) rotateZ(90deg)"),e.height(t.width()),r.data("deg",90);break;case 90:t.css("transform","translate3d("+Math.max(0,s()(window).width()-t.width())/2+"px, "+Math.max(0,s()(window).height()-i-t.height())/2+"px, 0) rotateZ(180deg)"),e.css("height","auto"),r.data("deg",180);break;case 180:t.css("transform","translate3d("+Math.max(0,s()(window).width()-t.width())/2+"px, "+((t.width()-e.height())/2+Math.max(0,s()(window).height()-i-t.height())/2)+"px, 0) rotateZ(270deg)"),e.height(t.width()),r.data("deg",270);break;case 270:t.css("transform","translate3d("+Math.max(0,s()(window).width()-t.width())/2+"px, "+Math.max(0,s()(window).height()-i-t.height())/2+"px, 0) rotateZ(0deg)"),e.css("height","auto"),r.data("deg",0)}}),setTimeout(function(){s()(".img-preview").width(s()(window).width()),s()(".img-preview__img img").css("transition","inherit")},301)})}},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l});var a=n(0),i=n.n(a),o=n(7),r=n.n(o),s=function(){r.a.highlightRender({style:"github",enable:"hljs-frontend"===Label.syntaxHighlighting},document)},c=function(){i()(".vditor-reset").each(function(){r.a.codeRender(this,-1<Label.lang.indexOf("zh")?"zh_CN":"en_US"),r.a.mathRenderByLute(this),r.a.abcRender(this),r.a.chartRender(this),r.a.mediaRender(this)}),r.a.mermaidRender(document)},l=function(){if(0!==i()(".content-audio").length){var e=function(){i()(".content-audio").each(function(){var e=i()(this);new APlayer({element:this,narrow:!1,autoplay:!1,mutex:!0,theme:"#4285f4",preload:"none",mode:"order",music:{title:e.data("title"),author:'<a href="'.concat(Label.link25,'" target="_blank">音频分享</a>'),url:e.data("url"),pic:Label.staticServePath+"/images/music.png"}})})};"undefined"!=typeof APlayer?e():i.a.ajax({method:"GET",url:Label.staticServePath+"/js/lib/aplayer/APlayer.min.js",dataType:"script",cache:!0}).done(function(){e()})}}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return u});var a=n(0),i=n.n(a),o=n(1),r=function(e,a){0!==e.length&&e.click(function(){var e=i()(this),t=e.data("type");if(t){var n="".concat(Label.servePath,"/oauth/").concat(t,"/redirect?goto=").concat(e.data("goto"));a.html('<img src="'.concat(Label.staticServePath,'/images/img-loading.svg">')).css("text-align","center"),window.location=n}})},s=function(){var t=i()("#verify2faBtn");if(0!==t.length){var e=i()("#verify2faInput");t.click(function(){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),i.a.ajax({url:Label.servePath+"/api/v2/login/2fa",type:"POST",cache:!1,data:JSON.stringify({twofactorAuthCode:e.val()}),success:function(e){0===e.sc?window.location.href=t.data("goto"):Object(o.a)(e.msg),t.removeAttr("disabled")}}))}),e.keyup(function(e){13===e.keyCode&&t.click()})}},c=function(){Object(o.c)(Label.confirmLogoutLabel,function(){localStorage&&(localStorage.clear(),localStorage.setItem("hadNotificate",!1)),location.href=Label.servePath+"/logout?goto="+Label.servePath})},l=function(){if(-1===location.href.indexOf("/login")){var e=location.href;0===location.search.indexOf("?goto")&&(e=location.href.replace(location.search,"")),window.location.href=Label.servePath+"/login?goto="+encodeURIComponent(e)}},d=function(){if(-1===location.href.indexOf("/register")){var e=location.href;0===location.search.indexOf("?goto")&&(e=location.href.replace(location.search,"")),window.location.href=Label.servePath+"/register?goto="+encodeURIComponent(e)}},u=function(e,t){i.a.ajax({url:Label.servePath+"/guide/next",type:"POST",cache:!1,data:JSON.stringify(e),success:function(e){e.sc||(t?t(e.msg):Object(o.a)(e.msg))}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});function i(){r()(".dialog").remove()}var a=n(0),r=n.n(a),o=function(e){0===r()(".dialog").length&&(r()("body").append('\n<div class="dialog '.concat(e.className,'">\n    <div class="dialog__bg"></div>\n    <div class="dialog__main">\n      <div class="dialog__header" onselectstart="return false;">\n          <h2></h2>\n          <svg><use xlink:href="#iconClose"></use></svg>\n      </div>\n      <div class="dialog__content"></div>\n    </div>\n</div>')).find(".dialog__header svg").click(function(){i()}),r()(".dialog__bg").click(function(){i()}),r()(window).keyup(function(e){var t=e.target.tagName.toLowerCase();27===e.keyCode&&"input"!==t&&"textarea"!==t&&i()}),r()(".dialog__header").mousedown(function(e){var t=document;e=e||window.event;var a=r()(".dialog__main")[0],i=e.clientX-parseInt(a.style.left),o=e.clientY-parseInt(a.style.top);t.ondragstart="return false;",t.onselectstart="return false;",t.onselect="document.selection.empty();",this.setCapture?this.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),t.onmousemove=function(e){var t=(e=e||window.event).clientX-i,n=e.clientY-o;t>r()(window).width()-r()(a).width()&&(t=r()(window).width()-r()(a).width()),n>r()(window).height()-r()(a).height()&&(n=r()(window).height()-r()(a).height()),a.style.left=Math.max(t,0)+"px",a.style.top=Math.max(n,0)+"px"},t.onmouseup=function(){this.releaseCapture?this.releaseCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),t.onmousemove=null,t.onmouseup=null,t.ondragstart=null,t.onselectstart=null,t.onselect=null}}));var t=r()(".dialog");t.attr("class","dialog").addClass(e.className),t.find(".dialog__header h2").html(e.title),t.find(".dialog__content").html(e.content),e.height?(t.find(".dialog__main").height(e.height),t.find(".dialog__content").height(e.height-85)):(t.find(".dialog__main").height("auto"),t.find(".dialog__content").height("auto"));var n=parseInt((r()(window).height()-t.find(".dialog__main").height())/2),a=parseInt((r()(window).width()-e.width)/2);t.find(".dialog__main").css({top:"".concat(Math.max(0,n),"px"),left:"".concat(a,"px"),width:"".concat(e.width,"px")}),t.show()}},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"g",function(){return h}),n.d(t,"m",function(){return p}),n.d(t,"l",function(){return b}),n.d(t,"f",function(){return v}),n.d(t,"j",function(){return g}),n.d(t,"k",function(){return w}),n.d(t,"d",function(){return y}),n.d(t,"c",function(){return _}),n.d(t,"b",function(){return x}),n.d(t,"i",function(){return L}),n.d(t,"h",function(){return O});var a=n(0),i=n.n(a),o=n(18),r=n.n(o),s=n(4),c=n(3),l=n(2),d=n(5),u=n(1),f=function(){0!==i()(".poll--open").length&&i()(".vditor-reset").on("click",".poll--open",function(){if(Label.isLoggedIn){var t=i()(this);t.hasClass("poll--disabled")||(i()(".poll--open").addClass("poll--disabled"),i.a.ajax({url:"".concat(Label.servePath,"/poll/opt?pollopt=").concat(t.data("id")),type:"POST",success:function(e){0===e.sc?(t.closest(".articlePoll")[0].outerHTML=e.data,Object(l.b)()):Object(u.a)(e.msg)},complete:function(){i()(".poll--open").removeClass("poll--disabled")}}))}else Object(s.a)()})},m=function(e){Label.isLoggedIn?(Object(d.a)({title:Label.reportLabel,width:500<i()(window).width()?500:i()(window).width()-40,height:500<i()(window).width()?450:362,content:'<div class="form fn__clear">\n<div class="fn__clear"><label><input type="radio" value="0" name="report" checked> '.concat(Label.spamADLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="1" name="report"> ').concat(Label.pornographicLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="2" name="report"> ').concat(Label.violationOfRegulationsLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="3" name="report"> ').concat(Label.allegedlyInfringingLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="4" name="report"> ').concat(Label.personalAttacksLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="49" name="report"> ').concat(Label.miscLabel,'</label></div>\n<br>\n<textarea id="reportTextarea" placeholder="').concat(Label.reportContentLabel,'" rows="3"></textarea><br><br>\n<button id="reportCommitBtn" class="fn__right btn btn--confirm">').concat(Label.reportLabel,"</button>\n</div>")}),i()("#reportCommitBtn").click(function(){var t=i()(this);"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),i.a.ajax({url:"".concat(Label.servePath,"/report"),type:"POST",cache:!1,data:encodeURIComponent(JSON.stringify({reportDataId:e||Label.articleOId,reportDataType:0,reportType:i()("input[name=report]:checked").val(),reportMemo:i()("#reportTextarea").val()})),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.sc?(Object(u.a)(Label.reportSuccLabel),i()(".dialog").remove()):Object(u.a)(e.responseJSON.msg)}}))})):Object(s.a)()},h=function(e){i()(".".concat(e)).each(function(){var e=i()(this).data("ua"),t=r()(e),n=t.device.model?t.device.model:t.os.name;n&&"Windows"!==n||(n=""),""!==n&&i()(this).html("via "+n)})},p=function(t){0!==t.length&&t.click(function(){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),i.a.ajax({url:"".concat(Label.servePath,"/vote/up/article"),type:"POST",cache:!1,data:JSON.stringify({dataId:Label.articleOId}),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(i()("#articleStats").html(e.responseJSON.data.html),i()(".articleMenuBtn details-menu").html("")):Object(u.a)(e.responseJSON.msg)}}))})},b=function(t){t.click(function(){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),i.a.ajax({url:"".concat(Label.servePath,"/vote/down/article"),type:"POST",cache:!1,data:JSON.stringify({dataId:Label.articleOId}),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(i()("#articleStats").html(e.responseJSON.data.html),i()(".articleMenuBtn details-menu").html("")):Object(u.a)(e.responseJSON.msg)}}))})},v=function(e,t){Label.isLoggedIn?Object(u.c)(Label.rewardConfirmLabel,function(){i.a.ajax({url:"".concat(Label.servePath,"/article/reward?articleId=").concat(e),type:"POST",cache:!1,success:function(e){t&&t(e)}})}):Object(s.a)()},g=function(){Object(u.c)(Label.stickConfirmLabel,function(){i.a.ajax({url:"".concat(Label.servePath,"/article/stick?articleId=").concat(Label.articleOId),type:"POST",cache:!1,success:function(e){0===e.code?window.location.href=Label.servePath+"/recent":Object(u.a)(e.msg)}})})},w=function(e){e.click(function(){"disabled"!==e.attr("disabled")&&Object(u.c)(Label.thankArticleConfirmLabel,function(){e.attr("disabled","disabled"),i.a.ajax({url:Label.servePath+"/article/thank?articleId="+Label.articleOId,type:"POST",cache:!1,success:function(e){0===e.code?(i()("#articleStats").html(e.data.html),i()(".articleMenuBtn details-menu").html("")):Object(u.a)(e.msg)},complete:function(){e.removeAttr("disabled")}})})})},y=function(e,t){Label.isLoggedIn&&i.a.ajax({url:Label.servePath+"/notifications/make-read",type:"POST",cache:!1,data:JSON.stringify({articleId:e,commentIds:t})})},_=function(e,t){t.find("input").click(function(){this.select()}).focus()[0].select();var n=e.data("shareurl"),a=function(e,t,n,a){var i="",o="";a.split(",").forEach(function(e){e&&(i+=" #".concat(e),o+=" #".concat(e,"#"))});var r=encodeURIComponent(e);return{weibo:"http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent(n+o)+"&url="+r+"&pic="+t,qqz:"https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=".concat(r,"&sharesource=qzone&title=").concat(encodeURIComponent(n+o),"&pics=").concat(t),twitter:"https://twitter.com/intent/tweet?status="+encodeURIComponent(n+i)+" "+r}}(n,e.data("avatar"),e.data("title"),e.data("tags"));k(t.find(".share__qr"),n,120),t.find("span").click(function(){var e=i()(this).data("type");"wechat"!==e&&(window.open(a[e],"_blank","top=100,left=200,width=648,height=618").opener=null)}),t.find("input").keydown(function(e){27===e.keyCode&&t.slideUp()})},k=function(t,n,a){if(window.QRious){var e=new window.QRious({padding:0,element:t[0],value:n,size:a});t.css("background-image","url(".concat(e.toDataURL("image/jpeg"),")"))}else i.a.ajax({method:"GET",url:Label.staticServePath+"/js/lib/qrious.min.js",dataType:"script",cache:!0,success:function(){var e=new window.QRious({element:t[0],value:n,size:a});t.css("background-image","url(".concat(e.toDataURL("image/jpeg"),")"))}})},x=function(e,t){if(0!==e.length){var n=function(){i.a.ajax({method:"GET",url:Label.staticServePath+"/js/lib/aplayer/APlayer.min.js?v=1.10.1",dataType:"script",cache:!0}).done(function(){new APlayer({mini:t,element:e[0],narrow:!1,autoplay:!!t,mutex:!0,theme:"#4285f4",mode:"order",preload:"none",music:{title:"语音预览",author:'<a href="https://hacpai.com/member/v" target="_blank">小薇</a>',url:e.data("url"),pic:t?"":Label.staticServePath+"/images/robot_avatar.jpg"}})})};t?e.click(function(){n(),e.unbind("click")}):n()}},L=function(e,t,n){"disabled"!==n.attr("disabled")&&i.a.ajax({url:Label.servePath+"/comment/original",type:"POST",data:JSON.stringify({commentId:e}),beforeSend:function(){n.attr("disabled","disabled")},success:function(e){if(!e.sc)return Object(u.a)(e.msg),!1;t.html("<ul>".concat(e.cmtTpl,"</ul>")).show(),Object(l.a)(),Object(l.b)(),Object(c.b)(),Object(c.c)(),Object(c.a)()},error:function(e){Object(u.a)(e.statusText)},complete:function(){n.removeAttr("disabled")}})},O=function(e,n,t){"disabled"!==t.attr("disabled")&&i.a.ajax({url:Label.servePath+"/comment/replies",type:"POST",data:JSON.stringify({commentId:e}),beforeSend:function(){t.attr("disabled","disabled")},success:function(e){if(!e.sc)return Object(u.a)(e.msg),!1;var t="";e.commentReplies.forEach(function(e){t+=e}),n.html("<ul>".concat(t,"</ul>")).slideDown(),Object(l.a)(),Object(l.b)(),Object(c.b)(),Object(c.c)(),Object(c.a)()},error:function(e){Object(u.a)(e.statusText)},complete:function(){t.removeAttr("disabled")}})}},function(e,t,n){window,e.exports=function(s){function e(e){for(var t,n,a=e[0],i=e[1],o=0,r=[];o<a.length;o++)n=a[o],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&r.push(c[n][0]),c[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(s[t]=i[t]);for(d&&d(e);r.length;)r.shift()()}var n={},c={"method.min":0};function l(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(i){var e=[],n=c[i];if(0!==n)if(n)e.push(n[2]);else{var t=new Promise(function(e,t){n=c[i]=[e,t]});e.push(n[2]=t);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.src=function(e){return l.p+""+({abcjs:"abcjs",echarts:"echarts","highlight.js":"highlight.js",katex:"katex",mermaid:"mermaid"}[e]||e)+".bundle.js"}(i);var r=new Error;a=function(e){o.onerror=o.onload=null,clearTimeout(s);var t=c[i];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;r.message="Loading chunk "+i+" failed.\n("+n+": "+a+")",r.name="ChunkLoadError",r.type=n,r.request=a,t[1](r)}c[i]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:o})},12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(e)},l.m=s,l.c=n,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,function(e){return t[e]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="https://cdn.jsdelivr.net/npm/vditor@1.10.2/dist/",l.oe=function(e){throw console.error(e),e};var t=window.webpackJsonpVditor=window.webpackJsonpVditor||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var d=a;return l(l.s="./src/method.ts")}({"./src/assets/icons/copy.svg":function(e,t){e.exports='<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 32 32" width=32px height=32px> <path d="M28.681 11.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.379 0-2.5 1.121-2.5 2.5v23c0 1.378 1.121 2.5 2.5 2.5h19c1.378 0 2.5-1.122 2.5-2.5v-15.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 9.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268v0zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-19c-0.271 0-0.5-0.229-0.5-0.5v-23c0-0.271 0.229-0.5 0.5-0.5 0 0 11.499-0 11.5 0v7c0 0.552 0.448 1 1 1h7v15.5zM18.841 1.319c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.378 0-2.5 1.121-2.5 2.5v23c0 1.207 0.86 2.217 2 2.45v-25.45c0-0.271 0.229-0.5 0.5-0.5h15.215c-0.301-0.248-0.595-0.477-0.873-0.681z"></path> </svg>'},"./src/assets/icons/pause.svg":function(e,t){e.exports='<svg version=1.1 xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 32 32"> <path d="M11 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1zM27 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1z"></path> </svg> '},"./src/assets/icons/play.svg":function(e,t){e.exports='<svg version=1.1 xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 32 32"> <path d="M6 0v32l20-15.977-20-16.023z"></path> </svg> '},"./src/method.ts":function(e,t,n){"use strict";n.r(t);var a=n("./src/ts/markdown/abcRender.ts"),i=n("./src/ts/markdown/chartRender.ts"),o=n("./src/ts/markdown/codeRender.ts"),r=n("./src/ts/markdown/highlightRender.ts"),s=n("./src/ts/markdown/mathRender.ts"),c=n("./src/ts/markdown/mathRenderByLute.ts"),l=n("./src/ts/markdown/md2html.ts"),d=n("./src/ts/markdown/mediaRender.ts"),u=n("./src/ts/markdown/mermaidRender.ts"),f=n("./src/ts/markdown/previewRender.ts"),m=n("./src/ts/markdown/speechRender.ts"),h=function(){function e(){}return e.codeRender=o.a,e.highlightRender=r.a,e.mathRenderByLute=c.a,e.mathRender=s.a,e.mermaidRender=u.a,e.chartRender=i.a,e.abcRender=a.a,e.mediaRender=d.a,e.speechRender=m.a,e.md2html=l.b,e.preview=f.a,e}();t.default=h},"./src/ts/constants.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var a="1.10.2",i="https://cdn.jsdelivr.net/npm"},"./src/ts/editor/setSelection.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var d=function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)},a=function(e,t,n){var a=0,i=0,o=n.childNodes[i],r=!1,s=!1;e=Math.max(0,e),t=Math.max(0,t);var c=n.ownerDocument.createRange();for(c.setStart(o||n,0),c.collapse(!0);!s&&o;){var l=a+o.textContent.length;if(!r&&a<=e&&e<=l&&(0===e?c.setStart(o,0):3===o.childNodes[0].nodeType?c.setStart(o.childNodes[0],e-a):o.nextSibling?c.setStartBefore(o.nextSibling):c.setStartAfter(o),r=!0,e===t)){s=!0;break}r&&a<=t&&t<=l&&(0===t?c.setEnd(o,0):3===o.childNodes[0].nodeType?c.setEnd(o.childNodes[0],t-a):o.nextSibling?c.setEndBefore(o.nextSibling):c.setEndAfter(o),s=!0),a=l,o=n.childNodes[++i]}return!s&&n.childNodes[i-1]&&c.setStartBefore(n.childNodes[i-1]),d(c),c},i=function(n,a){var i=0,o=0;if(Array.from(a).some(function(e,t){if(-1<(o=e.textContent.indexOf(n))&&3===a[t].childNodes[0].nodeType)return i=t,!0}),!(o<0)){var e=document.createRange();e.setStart(a[i].childNodes[0],o),e.setEnd(a[i].childNodes[0],o+n.length),d(e)}}},"./src/ts/i18n/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={en_US:{bold:"Blod",both:"editor & preview",check:"Task List",code:"Code Block",copied:"Copied",copy:"Copy",devtools:"DevTools",emoji:"Emoji",fileTypeError:"file type is error",format:"Format",fullscreen:"Fullscreen",headings:"Headings",help:"Help",imageURL:"image URL",info:"Info","inline-code":"Inline Code",italic:"Italic",line:"Line",link:"Link",list:"List",nameEmpty:"Name is empty","ordered-list":"Order List",over:"over",performanceTip:"Real-time preview requires ${x}ms, you can close it",preview:"Preview",quote:"Quote",record:"Start Record/End Record","record-tip":"The device does not support recording",recording:"recording...",redo:"Redo",strike:"Strike",table:"Table",undo:"Undo",update:"Update",upload:"Upload image or file",uploading:"uploading...",wysiwyg:"WYSIWYG"},zh_CN:{bold:"粗体",both:"编辑 & 预览",check:"任务列表",code:"代码块",copied:"已复制",copy:"复制",devtools:"开发者工具",emoji:"表情",fileTypeError:"文件类型不允许上传",format:"格式化",fullscreen:"全屏",headings:"标题",help:"帮助",imageURL:"图片地址",info:"关于","inline-code":"行内代码",italic:"斜体",line:"分隔线",link:"链接",list:"无序列表",nameEmpty:"文件名不能为空","ordered-list":"有序列表",over:"超过",performanceTip:"实时预览需 ${x}ms，可点击编辑 & 预览按钮进行关闭",preview:"预览",quote:"引用",record:"开始录音/结束录音","record-tip":"该设备不支持录音功能",recording:"录音中...",redo:"重做",strike:"删除线",table:"表格",undo:"撤销",update:"更新",upload:"上传图片或文件",uploading:"上传中...",wysiwyg:"所见即所得"}}},"./src/ts/markdown/abcRender.ts":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function(a){return void 0===a&&(a=document),function(o,r,s,c){return new(s=s||Promise)(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,a)}i((c=c.apply(o,r||[])).next())})}(void 0,void 0,void 0,function(){var t,n;return function(n,a){var i,o,r,e,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(r=2&t[0]?o.return:t[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,t[1])).done)return r;switch(o=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=a.call(n,s)}catch(e){t=[6,e],o=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}(this,function(e){switch(e.label){case 0:return 0<(t=a.querySelectorAll(".language-abc")).length?[4,i.e("abcjs").then(i.t.bind(null,"./node_modules/abcjs/src/api/abc_tunebook_svg.js",7))]:[3,2];case 1:n=e.sent().default,t.forEach(function(e){var t=document.createElement("div");e.parentNode.parentNode.replaceChild(t,e.parentNode),n(t,e.textContent.trim(),{}),t.style.overflowX="auto"}),e.label=2;case 2:return[2]}})})}},"./src/ts/markdown/chartRender.ts":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function(a){return void 0===a&&(a=document),function(o,r,s,c){return new(s=s||Promise)(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,a)}i((c=c.apply(o,r||[])).next())})}(void 0,void 0,void 0,function(){var t,n;return function(n,a){var i,o,r,e,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(r=2&t[0]?o.return:t[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,t[1])).done)return r;switch(o=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=a.call(n,s)}catch(e){t=[6,e],o=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}(this,function(e){switch(e.label){case 0:return 0<(t=a.querySelectorAll(".language-echarts")).length?[4,i.e("echarts").then(i.t.bind(null,"./node_modules/echarts/index.js",7))]:[3,2];case 1:n=e.sent().default,t.forEach(function(e){try{if("true"===e.getAttribute("data-processed"))return;var t=JSON.parse(e.innerHTML.trim());n.init(e).setOption(t),e.setAttribute("data-processed","true")}catch(t){e.className="hljs",e.innerHTML="echarts render error: <br>"+t}}),e.label=2;case 2:return[2]}})})}},"./src/ts/markdown/codeRender.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("./src/assets/icons/copy.svg"),o=n.n(a),r=n("./src/ts/i18n/index.ts"),s=n("./src/ts/util/code160to32.ts"),i=function(a,i){void 0===i&&(i="zh_CN"),a.querySelectorAll("pre > code").forEach(function(e,t){if(!(-1<e.className.indexOf("language-mermaid")||-1<e.className.indexOf("language-echarts")||-1<e.className.indexOf("language-abc")||-1<e.style.maxHeight.indexOf("px")||-1<a.className.indexOf("vditor-preview")&&5<t)){var n=document.createElement("div");n.className="vditor-copy",n.innerHTML="<textarea>"+Object(s.a)(e.innerText)+'</textarea><span aria-label="'+r.a[i].copy+"\"\nonmouseover=\"this.setAttribute('aria-label', '"+r.a[i].copy+"')\"\nclass=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '"+r.a[i].copied+"')\">"+o.a+"</span>",e.before(n),e.style.maxHeight=window.outerHeight-40+"px"}})}},"./src/ts/markdown/highlightRender.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("./src/ts/constants.ts"),i=n("./src/ts/util/addStyle.ts"),o=function(s,t){return void 0===t&&(t=document),function(o,r,s,c){return new(s=s||Promise)(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,a)}i((c=c.apply(o,r||[])).next())})}(void 0,void 0,void 0,function(){var r;return function(n,a){var i,o,r,e,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(r=2&t[0]?o.return:t[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,t[1])).done)return r;switch(o=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=a.call(n,s)}catch(e){t=[6,e],o=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}(this,function(e){switch(e.label){case 0:return["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode"].includes(s.style)||(s.style="github"),Object(i.a)(a.a+"/vditor@"+a.b+"/dist/js/highlight.js/styles/"+s.style+".css","vditorHljsStyle"),s.enable?0===t.querySelectorAll("pre > code").length?[2]:[4,n.e("highlight.js").then(n.t.bind(null,"./node_modules/highlight.js/lib/index.js",7))]:[2];case 1:return r=e.sent().default,t.querySelectorAll("pre > code").forEach(function(e){if(!(-1<e.className.indexOf("language-mermaid")||-1<e.className.indexOf("language-abc")||-1<e.className.indexOf("language-echarts"))&&(r.highlightBlock(e),s.lineNumber)){e.classList.add("vditor-linenumber");var n=e.querySelector(".vditor-linenumber__temp");n||((n=document.createElement("div")).className="vditor-linenumber__temp",e.insertAdjacentElement("beforeend",n));var t=getComputedStyle(e).whiteSpace,a=!1;"pre-wrap"!==t&&"pre-line"!==t||(a=!0);var i="",o=e.textContent.split(/\r\n|\r|\n/g);o.pop(),o.map(function(e){var t="";a&&(n.textContent=e||"\n",t=' style="height:'+n.getBoundingClientRect().height+'px"'),i+="<span"+t+"></span>"}),n.style.display="none",i='<span class="vditor-linenumber__rows">'+i+"</span>",e.insertAdjacentHTML("beforeend",i)}}),[2]}})})}},"./src/ts/markdown/mathRender.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("./src/ts/constants.ts"),i=n("./src/ts/util/addStyle.ts"),o=n("./src/ts/util/code160to32.ts"),r=function(t){var e=Object(o.a)(t.innerText);(2<e.split("$").length||1<e.split("\\(").length&&1<e.split("\\)").length)&&n.e("katex").then(n.t.bind(null,"./node_modules/katex/dist/katex.js",7)).then(function(){n.e("katex").then(n.bind(null,"./node_modules/katex/contrib/auto-render/auto-render.js")).then(function(e){Object(i.a)(a.a+"/vditor/dist/js/katex/katex.min.css","vditorKatexStyle"),e.default(t,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}]}),t.querySelectorAll(".katex").forEach(function(e){e.addEventListener("copy",function(e){e.stopPropagation(),e.preventDefault(),e.clipboardData.setData("text/plain",this.querySelector("annotation").textContent),e.clipboardData.setData("text/html",this.innerHTML)})})})})}},"./src/ts/markdown/mathRenderByLute.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("./src/ts/constants.ts"),i=n("./src/ts/util/addStyle.ts"),o=n("./src/ts/util/code160to32.ts"),r=function(e){var t=e.querySelectorAll(".vditor-math");0!==t.length&&n.e("katex").then(n.t.bind(null,"./node_modules/katex/dist/katex.js",7)).then(function(n){Object(i.a)(a.a+"/vditor/dist/js/katex/katex.min.css","vditorKatexStyle"),t.forEach(function(t){if(!t.getAttribute("data-math")){var e=Object(o.a)(t.textContent);t.setAttribute("data-math",e);try{t.innerHTML=n.renderToString(e,{displayMode:"DIV"===t.tagName,output:"html"})}catch(e){t.innerHTML=e.message,t.className="vditor-math vditor--error"}t.addEventListener("copy",function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.closest(".vditor-math");e.clipboardData.setData("text/html",t.innerHTML),e.clipboardData.setData("text/plain",t.getAttribute("data-math"))})}})})}},"./src/ts/markdown/md2html.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i});var o=n("./src/ts/constants.ts"),r=function(o,r,s,c){return new(s=s||Promise)(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,a)}i((c=c.apply(o,r||[])).next())})},s=function(n,a){var i,o,r,e,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(r=2&t[0]?o.return:t[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,t[1])).done)return r;switch(o=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=a.call(n,s)}catch(e){t=[6,e],o=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},c=function(t){var n=document.createElement("script");return n.type="text/javascript",n.src=o.a+"/vditor@"+o.b+"/dist/js/lute/lute.min.js",document.getElementsByTagName("head")[0].appendChild(n),new Promise(function(e){n.onload=function(){t&&!t.lute&&(t.lute=Lute.New(),t.lute.PutEmojis(t.options.hint.emoji),t.lute.SetEmojiSite(t.options.hint.emojiPath),t.lute.SetParallelParsing(!1),t.lute.SetInlineMathAllowDigitAfterOpenMarker(t.options.preview.inlineMathDigit)),e()}})},a=function(a,i){return r(void 0,void 0,void 0,function(){var t,n;return s(this,function(e){switch(e.label){case 0:return"undefined"!=typeof Lute?[3,2]:[4,c()];case 1:e.sent(),e.label=2;case 2:return i=Object.assign({emojiSite:o.a+"/vditor/dist/images/emoji",emojis:{}},i),(t=Lute.New()).PutEmojis(i.customEmoji),t.SetEmojiSite(i.emojiPath),t.SetHeadingAnchor(i.anchor),t.SetParallelParsing(!1),t.SetInlineMathAllowDigitAfterOpenMarker(i.inlineMathDigit),[2,(n=t.MarkdownStr("",a))[0]||n[1]]}})})},i=function(n,a){return r(void 0,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return void 0!==a.lute?[3,2]:[4,c()];case 1:e.sent(),e.label=2;case 2:return[2,(t=a.lute.MarkdownStr("",n))[0]||t[1]]}})})}},"./src/ts/markdown/mediaRender.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){e&&e.querySelectorAll("a").forEach(function(e){var t=e.getAttribute("href");t&&(t.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(e,t){e.insertAdjacentHTML("afterend",'<video controls="controls" src="'+t+'"></video>'),e.remove()}(e,t):t.match(/^.+.(mp3|wav)$/)?function(e,t){e.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+t+'"></audio>'),e.remove()}(e,t):function(e,t){var n=t.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),a=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),i=t.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),o=t.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),r=t.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),s=t.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/);n&&11===n[1].length?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+n[1]+(n[2]?"?start="+n[2]:"")+'"></iframe>'),e.remove()):a&&a[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+a[1]+'"></iframe>'),e.remove()):i&&i[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+i[1]+'"></iframe>'),e.remove()):o&&o[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="//coub.com/embed/'+o[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),e.remove()):r&&r[0]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="https://www.facebook.com/plugins/video.php?href='+encodeURIComponent(r[0])+'"></iframe>'),e.remove()):s&&s[2]&&(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="https://www.dailymotion.com/embed/video/'+s[2]+'"></iframe>'),e.remove())}(e,t))})}},"./src/ts/markdown/mermaidRender.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){0!==e.querySelectorAll("code.language-mermaid").length&&n.e("mermaid").then(n.t.bind(null,"./node_modules/mermaid/dist/mermaid.core.js",7)).then(function(e){e.init({noteMargin:10},".language-mermaid")})}},"./src/ts/markdown/previewRender.ts":function(e,t,n){"use strict";var r=n("./src/ts/constants.ts"),s=n("./src/ts/markdown/abcRender.ts"),c=n("./src/ts/markdown/chartRender.ts"),l=n("./src/ts/markdown/codeRender.ts"),d=n("./src/ts/markdown/highlightRender.ts"),u=n("./src/ts/markdown/mathRenderByLute.ts"),f=n("./src/ts/markdown/md2html.ts"),m=n("./src/ts/markdown/mediaRender.ts"),h=n("./src/ts/markdown/mermaidRender.ts"),p=n("./src/ts/markdown/speechRender.ts");n.d(t,"a",function(){return a});var a=function(a,i,o){return function(o,r,s,c){return new(s=s||Promise)(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,a)}i((c=c.apply(o,r||[])).next())})}(void 0,void 0,void 0,function(){var t,n;return function(n,a){var i,o,r,e,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(r=2&t[0]?o.return:t[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,t[1])).done)return r;switch(o=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=a.call(n,s)}catch(e){t=[6,e],o=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}(this,function(e){switch(e.label){case 0:return t={anchor:!1,className:o&&o.anchor?"vditor-reset vditor-reset--anchor":"vditor-reset",customEmoji:{},emojiPath:r.a+"/vditor/dist/images/emoji",hljs:{enable:!0,lineNumber:!1,style:"github"},inlineMathDigit:!1,lang:"zh_CN",speech:{enable:!1}},(o=Object.assign(t,o)).hljs&&(o.hljs=Object.assign({},t.hljs,o.hljs)),o.speech&&(o.speech=Object.assign({},t.speech,o.speech)),[4,Object(f.b)(i,o)];case 1:return n=e.sent(),o.transform&&(n=o.transform(n)),a.innerHTML=n,a.className=o.className,Object(l.a)(a,o.lang),Object(d.a)(o.hljs,a),Object(u.a)(a),Object(h.a)(a),Object(c.a)(a),Object(s.a)(a),Object(m.a)(a),o.speech.enable&&Object(p.a)(a,o.lang),o.anchor&&(document.querySelectorAll(".vditor-anchor").forEach(function(n){n.onclick=function(){var e=n.getAttribute("href").substr(1),t=document.getElementById("vditorAnchor-"+e).offsetTop;document.querySelector("html").scrollTop=t}}),window.onhashchange=function(){var e=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));e&&(document.querySelector("html").scrollTop=e.offsetTop)}),[2]}})})}},"./src/ts/markdown/speechRender.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("./src/assets/icons/pause.svg"),o=n.n(a),i=n("./src/assets/icons/play.svg"),r=n.n(i),s=n("./src/ts/editor/setSelection.ts"),c=function(e,a){if(void 0===a&&(a="zh_CN"),speechSynthesis&&SpeechSynthesisUtterance){var i=document.querySelector(".vditor-speech");if(!i){(i=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",i);var t=function(){var t,n;return speechSynthesis.getVoices().forEach(function(e){e.lang===a.replace("_","-")&&(t=e),e.default&&(n=e)}),t=t||n};void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=t);var n=t();i.onclick=function(){if("vditor-speech"===i.className){var e=new SpeechSynthesisUtterance(i.getAttribute("data-text"));e.voice=n,e.onend=function(){i.className="vditor-speech",speechSynthesis.cancel(),i.innerHTML=r.a},speechSynthesis.speak(e),i.className="vditor-speech vditor-speech--current",i.innerHTML=o.a}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),i.innerHTML=o.a):(speechSynthesis.pause(),i.innerHTML=r.a));Object(s.c)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){""===getSelection().toString().trim()&&"block"===i.style.display&&(i.className="vditor-speech",speechSynthesis.cancel(),i.style.display="none")})}e.addEventListener("mouseup",function(e){var t=getSelection().toString().trim();if(speechSynthesis.cancel(),""!==getSelection().toString().trim()){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var n=getSelection().getRangeAt(0).getBoundingClientRect();i.innerHTML=r.a,i.style.display="block",i.style.top=n.top+n.height+document.querySelector("html").scrollTop-20+"px",i.style.left=e.screenX+2+"px",i.setAttribute("data-text",t)}else"block"===i.style.display&&(i.className="vditor-speech",i.style.display="none")})}}},"./src/ts/util/addStyle.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e,t){if(!document.getElementById(t)){var n=document.createElement("link");n.id=t,n.rel="stylesheet",n.type="text/css",n.href=e,document.getElementsByTagName("head")[0].appendChild(n)}}},"./src/ts/util/code160to32.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){return e.replace(/\u00a0/g," ")}}}).default},function(e,t,n){"use strict";function a(e){c()("#"+e).click(function(){var e={title:"",content:"",tags:"",thoughtContent:"",rewardContent:"",rewardPoint:"",thoughtTime:(new Date).getTime(),QnAOfferPoint:""};localStorage.postData&&(e=JSON.parse(localStorage.postData)),e.title=c()(this).data("title"),e.tags="TGIF",localStorage.postData=JSON.stringify(e),window.location.href="".concat(Label.servePath,"/post?type=0")})}var i=n(0),c=n.n(i),o=(n(1),n(4),n(9)),r=n(17);n.d(t,"f",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h});function s(e){c.a.ajax({url:Label.servePath+"/notifications/make-read/"+e,type:"GET",cache:!1})}var l=function(e,t){c()(".tip__top").remove(),c()(".nav").after('<div class="tip__top tip__top--'.concat(e,' fn__flex"><div class="wrapper">\n<div class="fn__flex-1">').concat(t,'</div> <svg class="tip__svg"><use xlink:href="#iconClose"></use></svg>\n</div></div>')),c()(".tip__svg").click(function(){c()(".tip__top").remove()}),c()("html, body").animate({scrollTop:0},500)},d=function(){var e,t,n,s=c()('<div style="position: absolute;z-index: 130"></div>');s.hover(function(){c()(this).show(),clearTimeout(t)},function(){t=setTimeout(function(){s.hide()},200)}),c()("body").append(s).on("mouseover",".tooltipped__user",function(r){clearTimeout(t),1!==c()(this).closest(".vditor-preview").length&&(n=r.target.getAttribute("aria-name"),e=setTimeout(function(){c.a.ajax({method:"GET",cache:!1,url:Label.servePath+"/users/"+n+"/card"}).done(function(e){s.html(e),n.toLowerCase()===s.find(".ft-smaller").text().toLowerCase()&&setTimeout(function(){var e=0,t=0,n=c()(r.target).closest(".b3log-editor"),a=c()(r.target).closest("td");1===n.length&&(e=n.offset().top,t=n.offset().left),1===a.length&&(e=a.offset().top,t=a.offset().left);var i=r.target.offsetTop+e-s.outerHeight()-8;s.find(".user-card").hasClass("user-card--bg")?c()(window).scrollTop()>i&&(i=r.target.offsetTop+e+r.target.offsetHeight+8):c()(window).scrollTop()>i-39&&(i=r.target.offsetTop+e+r.target.offsetHeight+47);var o=r.target.offsetLeft+t;o+s.width()>c()(window).width()?s.css({left:"auto",right:"15px",top:i}).show():s.css({left:o,right:"auto",top:i}).show()},0)})},100))}).on("mouseout",".tooltipped__user",function(){clearTimeout(e),t=setTimeout(function(){s.hide()},200)}).on("click","#userCardFollowUser",function(){var t=c()(this),e=t.data("oid");t.prop("disabled")||(t.prop("disabled",!0),"follow"===t.data("type")?Object(o.b)(e,function(e){e.sc&&t.text(Label.unfollowLabel).data("type","unfollow"),t.prop("disabled",!1)}):Object(o.d)(e,function(e){e.sc&&t.text(Label.followLabel).data("type","follow"),t.prop("disabled",!1)}))})},u=function(){c()(".user-nav .nav__item").each(function(){0===location.href.indexOf(c()(this).attr("href"))?c()(this).addClass("nav__item--current"):"/register"===location.pathname?c()("#navRegister").addClass("nav__item--current"):"/login"===location.pathname?c()("#navLogin").addClass("nav__item--current"):0!==location.pathname.indexOf("/settings")&&0!==location.pathname.indexOf("/member/".concat(Label.userName))||c()(".user-nav .avatar-small").parent().addClass("nav__item--current")})},f=function(e){function t(e,t,n,a){var i='<a class="item" href="'.concat(Label.servePath,"/").concat(e,'">\n    <span class="fn__flex">\n        <span class="fn__flex-inline fn__flex-1">\n          <span>').concat(t,'</span>\n          <span class="fn__space5"></span>\n          <span class="count">').concat(n,"</span>\n        </span>");return a&&(i+='<span data-type="'.concat(a,'" aria-label="').concat(Label.makeAsReadLabel,'" class="tooltipped tooltipped__nw">\n            <svg><use xlink:href="#iconCheck"></use></svg>\n        </span>')),"".concat(i,"</span></a><hr>")}function n(e){c()(".home-menu a[data-type="+e+"] .readNotification").hide(),c()(".home-menu a[data-type="+e+"] .count").hide()}function a(e,t){c()(".home-menu a[data-type="+e+"] .readNotification").css("display","inline-block"),c()(".home-menu a[data-type="+e+"] .count").text(t).css("display","inline-block")}var i="";0<e.unreadChatNotificationCnt?(i+=t("chats",Label.chatLabel,e.unreadChatNotificationCnt,"chats"),0<c()(".readNotification").length&&a("chat",e.unreadChatNotificationCnt)):0===e.unreadChatNotificationCnt&&0<c()(".readNotification").length&&n("chat"),0<e.unreadCommentedNotificationCnt?(i+=t("notifications/commented",Label.notificationCommentedLabel,e.unreadCommentedNotificationCnt,"commented"),0<c()(".readNotification").length&&a("commented",e.unreadCommentedNotificationCnt)):0===e.unreadCommentedNotificationCnt&&0<c()(".readNotification").length&&n("commented"),0<e.unreadComment2edNotificationCnt?(i+=t("notifications/comment2ed",Label.notificationComment2edLabel,e.unreadComment2edNotificationCnt,"comment2ed"),0<c()(".readNotification").length&&a("comment2ed",e.unreadComment2edNotificationCnt)):0===e.unreadComment2edNotificationCnt&&0<c()(".readNotification").length&&n("comment2ed"),0<e.unreadReplyNotificationCnt?(i+=t("notifications/reply",Label.notificationReplyLabel,e.unreadReplyNotificationCnt,"reply"),0<c()(".readNotification").length&&a("reply",e.unreadReplyNotificationCnt)):0===e.unreadReplyNotificationCnt&&0<c()(".readNotification").length&&n("reply"),0<e.unreadAtNotificationCnt?(i+=t("notifications/at",Label.notificationAtLabel,e.unreadAtNotificationCnt,"at"),0<c()(".readNotification").length&&a("at",e.unreadAtNotificationCnt)):0===e.unreadAtNotificationCnt&&0<c()(".readNotification").length&&n("at"),0<e.unreadFollowingNotificationCnt?(i+=t("notifications/following",Label.notificationFollowingLabel,e.unreadFollowingNotificationCnt,"following"),0<c()(".readNotification").length&&a("following",e.unreadFollowingNotificationCnt)):0===e.unreadFollowingNotificationCnt&&0<c()(".readNotification").length&&n("following"),0<e.unreadReviewNotificationCnt?(i+=t("notifications/review",Label.reviewLabel,e.unreadReviewNotificationCnt),0<c()(".readNotification").length&&c()(".home-menu a[data-type=review] .count").text(e.unreadReviewNotificationCnt).css("display","inline-block")):0===e.unreadReviewNotificationCnt&&0<c()(".readNotification").length&&c()(".home-menu a[data-type=review] .count").hide(),0<e.unreadPointNotificationCnt?(i+=t("notifications/point",Label.pointLabel,e.unreadPointNotificationCnt),0<c()(".readNotification").length&&c()(".home-menu a[data-type=point] .count").text(e.unreadPointNotificationCnt).css("display","inline-block")):0===e.unreadPointNotificationCnt&&0<c()(".readNotification").length&&c()(".home-menu a[data-type=point] .count").hide(),0<e.unreadBroadcastNotificationCnt?(i+=t("notifications/broadcast",Label.sameCityLabel,e.unreadBroadcastNotificationCnt),0<c()(".readNotification").length&&c()(".home-menu a[data-type=broadcast] .count").text(e.unreadBroadcastNotificationCnt).css("display","inline-block")):0===e.unreadBroadcastNotificationCnt&&0<c()(".readNotification").length&&c()(".home-menu a[data-type=broadcast] .count").hide(),0<e.unreadWalletNotificationCnt?(i+=t("notifications/wallet",Label.walletLabel,e.unreadWalletNotificationCnt),0<c()(".readNotification").length&&c()(".home-menu a[data-type=wallet] .count").text(e.unreadSysAnnounceNotificationCnt).css("display","inline-block")):0===e.unreadWalletNotificationCnt&&0<c()(".readNotification").length&&c()(".home-menu a[data-type=wallet] .count").hide(),0<e.unreadSysAnnounceNotificationCnt?(i+=t("notifications/sys-announce",Label.systemLabel,e.unreadSysAnnounceNotificationCnt),0<c()(".readNotification").length&&c()(".home-menu a[data-type=sysAnnounce] .count").text(e.unreadSysAnnounceNotificationCnt).css("display","inline-block")):0===e.unreadSysAnnounceNotificationCnt&&0<c()(".readNotification").length&&c()(".home-menu a[data-type=sysAnnounce] .count").hide(),0<e.unreadNewFollowerNotificationCnt&&(i+=t("member/".concat(Label.currentUserName,"/followers"),Label.newFollowerLabel,e.unreadNewFollowerNotificationCnt)),0<e.unreadNotificationCnt?(c()("#makeAllNotificationsRead").show(),c()("#aNotifications").addClass("msg"),c()("#notificationsPanel").html(i.substr(0,i.length-4)),c()("#notificationsPanel .tooltipped").click(function(e){e.preventDefault(),e.stopPropagation(),s(c()(this).data("type")),c()(".home-menu a[data-type="+c()(this).data("type")+"]").hasClass("current")&&c()(".notification .unread").removeClass("unread"),c()(this).closest("details").removeAttr("open")}),c()(".home-menu .readNotification").click(function(e){var t=c()(this);s(t.data("type")),t.closest("a").hasClass("current")&&c()(".notification .unread").removeClass("unread"),e.preventDefault(),e.stopPropagation()})):(c()("#makeAllNotificationsRead").hide(),c()("#notificationsPanel").html('<a class="item" href="'.concat(Label.servePath,'/notifications">').concat(Label.viewAllMsgLabel,"</a>")),c()("#aNotifications").removeClass("msg"))},m=function(){a("activityTGIF"),a("activityHeaderTGIF")},h=function(){try{Object(r.a)(c()("#comments > .list > ul > li"),{articleHeat:function(a){var e=c()("#heatBar");if(1===e.length){var t=c()(".heat");"+"===a.operation?(e.append('<i class="point"></i>'),setTimeout(function(){t.width(c()(".heat").width()+3),e.find(".point").remove()},2e3)):(t.width(c()(".heat").width()-3),e.append('<i class="point-remove"></i>'),setTimeout(function(){e.find(".point-remove").remove()},2e3))}c()(".article-list__item h2 > a").each(function(){var e=c()(this).data("id");if(e&&(e=e.toString(),a.articleId===e)){var t=c()(this).closest("li"),n=t.find(".heat");"+"===a.operation?(t.append('<div class="fn-relative"><i class="point"></i></div>'),setTimeout(function(){n.width(n.width()+3),t.find(".point").parent().remove()},2e3)):(n.width(n.width()-3),t.append('<div class="fn-relative"><i class="point-remove"></i></div>'),setTimeout(function(){t.find(".point-remove").parent().remove()},2e3))}})},refreshNotification:function(e){f(e)},chat:function(e){var t=c()(".chats__list");0!==t.length&&e.data.chatFromName==c()("#sendChatBtn").data("name")&&(t.prepend('<div class="fn__flex chats__item">\n    <a href="'.concat(Label.servePath,"/member/").concat(e.data.chatFromName,'">\n        <div aria-name="').concat(e.data.chatFromName,'"\n             class="avatar tooltipped__user"\n             style="background-image: url(').concat(e.data.chatUserAvatarURL,')"></div>\n    </a>\n    <div class="chats__content">\n        <div class="chats__arrow"></div>\n        <div class="vditor-reset ft-13">\n            ').concat(e.data.chatContent,'\n        </div>\n        <div class="ft__smaller ft__fade fn__right">\n            ').concat(e.data.chatCreated,"\n        </div>\n    </div>\n</div>")),t.animate({scrollTop:0},500))}})}catch(e){console.log("websocket error: ",e)}}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return l});var a=n(0),i=n.n(a),o=n(4),r=(n(1),function(e,t){Label.isLoggedIn?i.a.ajax({url:"".concat(Label.servePath,"/follow/user"),type:"POST",cache:!1,data:JSON.stringify({followingId:e}),complete:function(e){t(e.responseJSON)}}):Object(o.a)()}),s=function(e,t){Label.isLoggedIn?i.a.ajax({url:"".concat(Label.servePath,"/unfollow/user"),type:"POST",cache:!1,data:JSON.stringify({followingId:e}),complete:function(e){t(e.responseJSON)}}):Object(o.a)()},c=function(e,t){Label.isLoggedIn?i.a.ajax({url:"".concat(Label.servePath,"/follow/tag"),type:"POST",cache:!1,data:JSON.stringify({followingId:e}),complete:function(e){t&&t(e.responseJSON)}}):Object(o.a)()},l=function(e,t){Label.isLoggedIn?i.a.ajax({url:"".concat(Label.servePath,"/unfollow/tag"),type:"POST",cache:!1,data:JSON.stringify({followingId:e}),complete:function(e){t(e.responseJSON)}}):Object(o.a)()}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),r=n(2),s=n(1);t.a=function(e){Label.emoji||i.a.ajax({url:"".concat(Label.servePath,"/users/emotions"),type:"GET",cache:!0,async:!1,success:function(e){Label.emoji={},Array.isArray(e.data)&&e.data.forEach(function(e){var t=Object.keys(e)[0];Label.emoji[t]=e[t]})}});var t={toolbar:["emoji","headings","bold","italic","|","quote","list","ordered-list","check","|","code","inline-code","|","undo","redo","|","upload","link","table","record","|","both","preview","format","|","fullscreen","devtools","info","help"],typewriterMode:e.typewriterMode||!1,cache:e.cache||!1,input:e.input,tab:"\t",preview:{delay:500,mode:e.preview.mode,url:"".concat(Label.servePath,"/markdown"),parse:function(e){"none"!==e.style.display&&(Object(r.a)(),Object(r.b)(),Object(o.a)(),Object(o.b)())},hljs:{enable:"hljs-frontend"===Label.syntaxHighlighting}},upload:{max:Math.max(Label.fileMaxSize,Label.imgMaxSize),url:"".concat(Label.servePath,"/upload/editor"),linkToImgUrl:"".concat(Label.servePath,"/upload/fetch"),filename:function(e){return e.replace(/[^(a-zA-Z0-9\u4e00-\u9fa5\.)]/g,"").replace(/[\?\\/:|<>\*\[\]\(\)\$%\{\}@~]/g,"").replace("/\\s/g","")}},placeholder:e.placeholder,height:e.height,counter:e.counter,resize:{enable:e.resize.enable,position:e.resize.position,after:e.resize.after},lang:-1<Label.lang.indexOf("zh")?"zh_CN":"en_US",hint:{emojiTail:'<a href="'.concat(Label.servePath,'/settings/function" target="_blank">').concat(Label.setEmotionLabel,"</a>"),emoji:Label.emoji,at:function(t){var n=[];return i.a.ajax({url:"".concat(Label.servePath,"/users/names"),type:"POST",async:!1,data:JSON.stringify({name:t}),success:function(e){0===e.code?(n=e.data.map(function(e){return e.value="@".concat(e.userName),e.html="<img src='".concat(e.userAvatarURL,"'/> ").concat(e.userName),e}),""===t&&n.push({html:"<img src='".concat(Label.staticServePath,"/images/user-thumbnail.png'/> 参与者"),value:"@participants"})):Object(s.a)(e.msg)}}),n}},esc:e.esc,ctrlEnter:e.ctrlEnter};if(i()(window).width()<768&&(t.toolbar=["emoji","line","quote","list","ordered-list","check","upload","link","preview","format","info","help"],t.resize.enable=!1),!window.Vditor){var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/npm/vditor@1.10.2/dist/index.min.js",!1),n.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),n.send("");var a=document.createElement("script");a.type="text/javascript",a.text=n.responseText,document.getElementsByTagName("head")[0].appendChild(a)}return new window.Vditor(e.id,t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),c=n.n(a),i=function(o,n,r,s){var a,i=[9,13,16,17,18,37,38,39,40,91,93,112,113,115,116,117,118,120,121,123];o.keyup(function(e){var t=this;clearTimeout(a),a=setTimeout(function(){i.includes(e.keyCode)||n&&n(c()(t))},260)}).keydown(function(e){var t=c()(this).next().find(".item"),n=c()(this).next();if(38===e.keyCode||40===e.keyCode){if(0===n.find(".item--current").length)38===e.keyCode?t.last().addClass("item--current"):t.first().addClass("item--current");else for(var a=0;a<t.length;a++)if(-1<t[a].className.indexOf("item--current")){t[a].className="item",38===e.keyCode?0===a?t[t.length-1].className="item item--current":t[a-1].className="item item--current":a+1>=t.length?t[0].className="item item--current":t[a+1].className="item item--current";break}var i=n.find(".item--current");n.scrollTop(i[0].offsetTop-n.outerHeight()+i.outerHeight()+10)}else 13===e.keyCode?r&&r(n,o):27===e.keyCode&&o.blur();s&&s(e,o)}).focus(function(){1===c()(this).next().length&&""===c()(this).next().html().trim()||c()(this).next().show()}).blur(function(){var e=this;setTimeout(function(){c()(e).next().hide()},300)})}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return f});var a=n(0),s=n.n(a),i=n(10),c=n(1),r=n(2),l=n(3),d=n(6),u=n(4),f=function(e,t,n){if(Label.isLoggedIn){var a=s()(".editor__panel"),i=s()(".editor__main");if(0!==a.length)if(Label.commonAddCommentGrant)if("block"!==a.css("display")){var o=s()("#replyUseName");o.removeData(),t?(o.data("commentOriginalCommentId",e).html('<div class="fn__flex-inline">\n  <svg><use xlink:href="#iconReply"></use></svg>\n  <span class="fn__space5"></span>\n  <img class="avatar avatar--small" src="'.concat(n,'">\n  <span class="fn__space5"></span>\n  <span>').concat(t,"</span>\n</div>")),s()("#commentAnonymous").parent().show()):e?(s()("#commentAnonymous").parent().hide(),o.data("commentId",e).html('<span class="ft__fade">'.concat(Label.editLabel,"</span>"))):(s()("#commentAnonymous").parent().show(),o.html('<div class="fn__flex-inline">\n  <svg><use xlink:href="#iconReply"></use></svg>\n  <span class="fn__space5"></span>\n  <span>'.concat(s()("title").html(),"</span>\n</div>"))),s()("#commentVisible, #commentAnonymous").prop("checked",!1),a.show(),i.slideDown(function(){window.commentEditor.focus()});var r=s()("#".concat(e));1===r.length&&(s()(window).width()<768?s()(window).scrollTop(r[0].offsetTop-308):s()(window).scrollTop(r[0].offsetTop)),r.css({"background-color":"#9bbee0"}),setTimeout(function(){r.css({"background-color":"#FFF",transition:"all 3s cubic-bezier(0.56, -0.36, 0.58, 1)"})},100),setTimeout(function(){r.removeAttr("style")},3100)}else i.slideUp(function(){a.hide()});else Object(c.a)(Label.invalidAppRoleLabel);else Object(c.a)(Label.notAllowCmtLabel)}else Object(u.a)()},o=function(){if(s()("body").on("click",".commentToggleEditorBtn",function(){f()}),Label.isLoggedIn&&0!==s()(".editor__panel").length){var e=s()("#commentSubmitBtn");window.commentEditor=Object(i.a)({cache:!0,resize:{enable:!0,position:"top"},preview:{mode:"editor"},id:"commentContent",placeholder:Label.commentEditorPlaceholderLabel,height:200,counter:4096,esc:f,ctrlEnter:function(){e.click()}}),e.click(function(){m(e)})}},m=function(t){if(window.b3logEditorIsUploading)Object(c.a)(Label.uploadingLabel);else if(t.data("haspermission")){if(4096<window.commentEditor.getValue().length||0===window.commentEditor.getValue().length)return Object(c.a)(Label.commentErrorLabel),!1;var e={articleId:Label.articleOId,commentAnonymous:s()("#commentAnonymous").prop("checked"),commentVisible:s()("#commentVisible").prop("checked"),commentContent:window.commentEditor.getValue(),userCommentViewMode:Label.userCommentViewMode},n=s()("#replyUseName");n.data("commentOriginalCommentId")&&(e.commentOriginalCommentId=n.data("commentOriginalCommentId"));var a=Label.servePath+"/comment",i="POST",o=n.data("commentId");o&&(a=Label.servePath+"/comment/"+o,i="PUT"),"disabled"!==t.attr("disabled")&&s.a.ajax({url:a,type:i,headers:{csrfToken:Label.csrfToken},cache:!1,data:encodeURIComponent(JSON.stringify(e)),beforeSend:function(){t.attr("disabled","disabled"),window.commentEditor.disabled()},success:function(e){0===e.code?(Label.commentReviewRequired?Object(c.a)(Label.reviewingLabel):o&&(document.getElementById(o).outerHTML=e.data.html,Object(r.a)(),Object(r.b)(),Object(l.b)(),Object(l.c)(),Object(l.a)(),Object(d.g)("via")),f()):Object(c.a)(e.msg)},error:function(e){Object(c.a)(e.statusText)},complete:function(e){t.removeAttr("disabled"),window.commentEditor.enable(),0===e.responseJSON.code&&window.commentEditor.setValue("")}})}else Object(c.a)(Label.sc403Label)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(0),i=n.n(a),o=n(1),r=function(e,t){0!==e.length&&(t.keypress(function(){13===event.keyCode&&e.click()}),e.click(function(){"disabled"!==e.attr("disabled")&&(e.attr("disabled","disabled"),i.a.ajax({url:Label.servePath+"/breezemoon",type:"POST",cache:!1,headers:{csrfToken:Label.csrfToken},data:encodeURIComponent(JSON.stringify({breezemoonContent:t.val()})),success:function(e){0===e.sc?window.location.reload():Object(o.a)(e.msg)},complete:function(){e.removeAttr("disabled")}}))}))}},function(e,t,n){"use strict";var a=n(0),l=n.n(a),o=n(1),i=n(15);function r(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var s=e.handler,c=e.data.keys.toLowerCase().split(" ");e.handler=function(n){if(this===n.target||!(l.a.hotkeys.options.filterInputAcceptingElements&&l.a.hotkeys.textInputTypes.test(n.target.nodeName)||l.a.hotkeys.options.filterContentEditable&&l()(n.target).attr("contenteditable")||l.a.hotkeys.options.filterTextInputs&&-1<l.a.inArray(n.target.type,l.a.hotkeys.textAcceptingInputTypes))){var a="keypress"!==n.type&&l.a.hotkeys.specialKeys[n.which],e=String.fromCharCode(n.which).toLowerCase(),i="",t={};n.metaKey&&!n.ctrlKey&&"meta"!==a&&(i+="ctrl+"),l.a.each(["alt","ctrl","shift"],function(e,t){n[t+"Key"]&&a!==t&&(i+=t+"+")}),n.metaKey&&"meta"!==a&&-1<i.indexOf("alt+ctrl+shift+")&&(i=i.replace("alt+ctrl+shift+","hyper+")),a?t[i+a]=!0:(t[i+e]=!0,t[i+l.a.hotkeys.shiftNums[e]]=!0,"shift+"===i&&(t[l.a.hotkeys.shiftNums[e]]=!0));for(var o=0,r=c.length;o<r;o++)if(t[c[o]])return s.apply(this,arguments)}}}}n.d(t,"b",function(){return u}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return m}),l.a.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},l.a.each(["keydown","keyup","keypress"],function(){l.a.event.special[this]={add:r}}),window.prevKey=void 0;function s(e,t,n){var a=l()(t+"li."+n);if(1===a.length){if("top"===e||"bottom"===e)return l()(window).scrollTop(a.offset().top),!1;(l()(window).height()+l()(window).scrollTop()<a.offset().top+a.outerHeight()||l()(window).scrollTop()>a.offset().top)&&("down"===e?l()(window).scrollTop(a.offset().top-(l()(window).height()-a.outerHeight())):l()(window).scrollTop(a.offset().top))}}function c(t){t&&(1!==l()(t).length?l.a.ajax({url:"".concat(Label.servePath,"/article/action?id=").concat(Label.articleOId),cache:!1,complete:function(e){0===e.responseJSON.code?(l()(".articleMenuBtn details-menu").html(e.responseJSON.data),Object(i.a)(),l()(t).click()):Object(o.a)(e.responseJSON.msg)}}):l()(t).click())}function d(t,n){if(t)if(1!==l()(t).length){var e=t.split(" ");e.splice(-1);var a=e.join(" "),i=l()(a).attr("id");l.a.ajax({url:"".concat(Label.servePath,"/comment/action?id=").concat(i),cache:!1,complete:function(e){0===e.responseJSON.code?(l()(a).find("details-menu").html(e.responseJSON.data),"link"===n?window.location=l()(t).attr("href"):l()(t).click()):Object(o.a)(e.responseJSON.msg)}})}else"link"===n?window.location=l()(t).attr("href"):l()(t).click()}var u=function(e,n,a,t){var i=3<arguments.length&&void 0!==t?t:"h2 a";if(!Label.userKeyboardShortcutsStatus||"1"===Label.userKeyboardShortcutsStatus)return!1;l()(document).bind("keydown","c",function(){return window.prevKey||(window.location.href=Label.servePath+"/post?type=0"),!1}).bind("keyup","g",function(){return window.prevKey="g",setTimeout(function(){window.prevKey=void 0},1e3),!1}).bind("keyup","s",function(){return e.focus(),!1}).bind("keyup","t",function(){return void 0===window.prevKey&&l()("html, body").animate({scrollTop:0},800),!1}).bind("keyup","n",function(){return"g"===window.prevKey&&(window.location.href=Label.servePath+"/notifications"),!1}).bind("keyup","i",function(){return"g"===window.prevKey&&(window.location.href=Label.servePath),!1}).bind("keyup","r",function(){return"g"===window.prevKey&&(window.location.href=Label.servePath+"/recent"),!1}).bind("keyup","q",function(){return"g"===window.prevKey&&(window.location.href=Label.servePath+"/qna"),!1}).bind("keyup","d",function(){return"g"===window.prevKey&&(window.location.href=Label.servePath+"/domains"),!1}).bind("keyup","w",function(){return"g"===window.prevKey&&(window.location.href=Label.servePath+"/watch"),!1}).bind("keyup","Shift+/",function(){return window.open(Label.link1).opener=null,!1}).bind("keyup","j",function(){var e=l()(n+"li."+a);return 0===e.length?l()(n+"li:first").addClass(a):1===e.next().length&&(e.next().addClass(a),e.removeClass(a)),s("down",n,a),!1}).bind("keyup","k",function(){var e=l()(n+"li."+a);return 0===e.length?l()(n+"li:last").addClass(a):1===e.prev().length&&(e.prev().addClass(a),e.removeClass(a)),s("up",n,a),!1}).bind("keyup","f",function(){return l()(n+"li."+a).removeClass(a),l()(n+"li:first").addClass(a),s("top",n,a),!1}).bind("keyup","l",function(){return window.prevKey||(l()(n+"li."+a).removeClass(a),l()(n+"li:last").addClass(a),s("bottom",n,a)),!1}).bind("keyup","o",function(){var e=l()(n+"li.".concat(a," ").concat(i));if(0===e.length)return!1;var t=e.attr("href");return t&&(window.location.href=t),!1}).bind("keyup","return",function(){var e=l()(n+"li.".concat(a," ").concat(i));if(0===e.length)return!1;var t=e.attr("href");t&&(window.location.href=t)})},f=function(e){if(!Label.userKeyboardShortcutsStatus||"1"===Label.userKeyboardShortcutsStatus)return!1;l()(document).bind("keyup","x",function(){return window.prevKey="x",setTimeout(function(){window.prevKey=void 0},1e3),!1}).bind("keyup","v",function(){return window.prevKey="v",setTimeout(function(){window.prevKey=void 0},1e3),!1}).bind("keydown","r",function(){return window.prevKey?"v"===window.prevKey?l()(e.vrQuery).click():"x"===window.prevKey&&d(e.xrQuery):e.rEvent&&e.rEvent(),!1}).bind("keyup","h",function(){return"x"===window.prevKey&&d(e.xhQuery),!1}).bind("keyup","t",function(){return"x"===window.prevKey&&d(e.xtQuery),!1}).bind("keyup","d",function(){return"x"===window.prevKey&&d(e.xdQuery),!1}).bind("keyup","c",function(){return"x"===window.prevKey&&d(e.xcQuery),!1}).bind("keyup","m",function(){return"x"===window.prevKey&&d(e.xmQuery),!1}).bind("keyup","a",function(){return"x"===window.prevKey&&d(e.xaLinkQuery,"link"),!1}).bind("keyup","m",function(){return"v"===window.prevKey&&c(e.vmQuery),!1}).bind("keyup","h",function(){return"v"===window.prevKey&&c(e.vhQuery),!1}).bind("keyup","t",function(){return"v"===window.prevKey&&c(e.vtQuery),!1}).bind("keyup","d",function(){return"v"===window.prevKey&&c(e.vdQuery),!1}).bind("keyup","i",function(){return"v"===window.prevKey&&c(e.viQuery),!1}).bind("keyup","c",function(){return"v"===window.prevKey&&c(e.vcQuery),!1}).bind("keyup","l",function(){return"v"===window.prevKey&&c(e.vlQuery),!1}).bind("keyup","e",function(){return"v"===window.prevKey&&e.veLink?window.location.href=e.veLink:"x"===window.prevKey&&d(e.xeQuery),!1}).bind("keyup","s",function(){return"v"===window.prevKey&&c(e.vsQuery),!1}).bind("keyup","a",function(){return"v"===window.prevKey&&e.vaLink&&(window.location.href=e.vaLink),!1}).bind("keyup","p",function(){return"v"===window.prevKey&&1===l()("link[rel=prev]").length&&(window.location.href=l()("link[rel=prev]").attr("href")),!1}).bind("keyup","n",function(){return"v"===window.prevKey&&1===l()("link[rel=next]").length&&(window.location.href=l()("link[rel=next]").attr("href")),!1}).bind("keyup","o",function(){return"x"===window.prevKey&&d(e.xoQuery),!1})},m=function(e){if(!Label.userKeyboardShortcutsStatus||"1"===Label.userKeyboardShortcutsStatus)return!1;l()(document).bind("keyup","v",function(){return window.prevKey="v",setTimeout(function(){window.prevKey=void 0},1e3),!1}).bind("keyup","c",function(){return"v"===window.prevKey&&e.vcBom&&e.vcBom.click(),!1}).bind("keyup","a",function(){return"v"===window.prevKey&&e.vaLink&&(window.location.href=e.vaLink),!1})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(6),i=n(0),o=n.n(i),r=n(16),s=n(1),c=n(12),l=function(){Object(a.k)(o()("#articleThankBtn")),o()("#articleCollectBtn").click(function(){var e=o()(this);"follow"===e.data("type")?function(t){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),o.a.ajax({url:"".concat(Label.servePath,"/follow/article"),type:"POST",cache:!1,data:JSON.stringify({followingId:Label.articleOId}),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(o()("#articleStats").html(e.responseJSON.data.html),o()(".articleMenuBtn details-menu").html("")):Object(s.a)(e.responseJSON.msg)}}))}(e):function(t){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),o.a.ajax({url:"".concat(Label.servePath,"/unfollow/article"),type:"POST",cache:!1,data:JSON.stringify({followingId:Label.articleOId}),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(o()("#articleStats").html(e.responseJSON.data.html),o()(".articleMenuBtn details-menu").html("")):Object(s.a)(e.responseJSON.msg)}}))}(e)}),o()("#articleFollowBtn").click(function(){var e=o()(this);"follow"===e.data("type")?function(t){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),o.a.ajax({url:"".concat(Label.servePath,"/follow/article-watch"),type:"POST",cache:!1,data:JSON.stringify({followingId:Label.articleOId}),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(o()("#articleStats").html(e.responseJSON.data.html),o()(".articleMenuBtn details-menu").html("")):Object(s.a)(e.responseJSON.msg)}}))}(e):function(t){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),o.a.ajax({url:"".concat(Label.servePath,"/unfollow/article-watch"),type:"POST",cache:!1,data:JSON.stringify({followingId:Label.articleOId}),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(o()("#articleStats").html(e.responseJSON.data.html),o()(".articleMenuBtn details-menu").html("")):Object(s.a)(e.responseJSON.msg)}}))}(e)}),Object(a.m)(o()("#articleGoodBtn")),Object(a.l)(o()("#articleBadBtn"));var t=o()("#articleActionPanel");1===t.length?o()("#articleShareBtn").click(function(){var e=o()(this);e.addClass("action__item--current"),t.html('<div class="fn__flex share">\n  <input type="text" class="input fn__flex-1" readonly value="'.concat(e.data("shareurl"),'"/>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to QQZone" data-type="qqz">\n    <svg class="share__svg share__svg--qq"><use xlink:href="#iconQQZ"></use></svg></span>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to WeiBo" data-type="weibo">\n    <svg class="share__svg share__svg--weibo"><use xlink:href="#iconWeibo"></use></svg></span>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to Twitter" data-type="twitter">\n    <svg class="share__svg share__svg--twitter"><use xlink:href="#iconTwitter"></use></svg></span>\n  <details class="details fn__flex-center">\n    <summary>\n      <div class="vditor-tooltipped vditor-tooltipped__nw" aria-label="Share to WeChat" data-type="wechat">\n        <svg class="share__svg share__svg--wechat"><use xlink:href="#iconWechat"></use></svg></div>\n    </summary>\n    <details-menu class="share__details fn__layer">\n        <div class="item"><div class="share__qr"></div></div>\n    </details-menu>\n  </details>\n</div>')).slideDown(),Object(a.c)(e,t)}):0===t.length&&o()(".articleMenuBtn #articleShareBtn").hide(),o()("#articleStickBtn").click(function(){Object(a.j)()}),o()("#articleHistoryBtn").click(function(){Object(r.a)()}),o()("#articleReportBtn").click(function(){Object(a.e)()}),o()(".articleMenuBtn .commentShowEditorBtn").click(function(){Object(c.a)()})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),o=n.n(a),r=n(5),s=n(1),i=function(e,t){function n(){o.a.ajax({url:Label.servePath+"/"+i+"/"+a+"/revisions",cache:!1,success:function(e){if(e.sc){if(0===e.revisions.length||1===e.revisions.length)return Object(r.a)({title:Label.updateHistoryLabel,width:o()(window).width()-80,height:o()(window).height()-80,content:'<div id="revisions"><b>'.concat(Label.noRevisionLabel,"</b></div>")}),!1;Object(r.a)({title:Label.updateHistoryLabel,width:o()(window).width()-80,height:o()(window).height()-80,content:'<div id="revision"><div id="revisions"></div></div>'}),o()("#revisions").html("").prev().remove(),o()("#revisions").data("revisions",e.revisions).before('<div class="revisions"><a href="javascript:void(0)" class="first"><svg><use xlink:href="#iconChevronLeft"</svg></a><span>'+(e.revisions.length-1)+"~"+e.revisions.length+"/"+e.revisions.length+'</span><a href="javascript:void(0)" class="disabled last"><svg><use xlink:href="#iconChevronRight"</svg></a></div>'),e.revisions.length<=2&&o()("#revision a").first().addClass("disabled");var t=JsDiff.createPatch("",e.revisions[e.revisions.length-2].revisionData.articleContent||e.revisions[e.revisions.length-2].revisionData.commentContent,e.revisions[e.revisions.length-1].revisionData.articleContent||e.revisions[e.revisions.length-1].revisionData.commentContent,e.revisions[e.revisions.length-2].revisionData.articleTitle||"",e.revisions[e.revisions.length-1].revisionData.articleTitle||"");return new Diff2HtmlUI({diff:t}).draw("#revisions",{matching:"lines",outputFormat:"side-by-side",synchronisedScroll:!0}),function(){var n=o()("#revisions").data("revisions");o()("#revision a.first").click(function(){if(!o()(this).hasClass("disabled")){var e=parseInt(o()("#revision .revisions").text().split("~")[0]);e<=2?o()(this).addClass("disabled"):o()(this).removeClass("disabled"),2<n.length&&o()("#revision a.last").removeClass("disabled"),o()("#revision .revisions > span").html(e-1+"~"+e+"/"+n.length);var t=JsDiff.createPatch("",n[e-2].revisionData.articleContent||n[e-2].revisionData.commentContent,n[e-1].revisionData.articleContent||n[e-1].revisionData.commentContent,n[e-2].revisionData.articleTitle||"",n[e-1].revisionData.articleTitle||"");new Diff2HtmlUI({diff:t}).draw("#revisions",{matching:"lines",outputFormat:"side-by-side",synchronisedScroll:!0})}}),o()("#revision a.last").click(function(){if(!o()(this).hasClass("disabled")){var e=parseInt(o()("#revision .revisions span").text().split("~")[0]);e>n.length-3?o()(this).addClass("disabled"):o()(this).removeClass("disabled"),2<n.length&&o()("#revision a.first").removeClass("disabled"),o()("#revision .revisions > span").html(e+1+"~"+(e+2)+"/"+n.length);var t=JsDiff.createPatch("",n[e].revisionData.articleContent||n[e].revisionData.commentContent,n[e+1].revisionData.articleContent||n[e+1].revisionData.commentContent,n[e].revisionData.articleTitle||"",n[e+1].revisionData.articleTitle||"");new Diff2HtmlUI({diff:t}).draw("#revisions",{matching:"lines",outputFormat:"side-by-side",synchronisedScroll:!0})}})}(),!1}Object(s.a)(e.msg)}})}var a=0<arguments.length&&void 0!==e?e:Label.articleOId,i=1<arguments.length&&void 0!==t?t:"article";"undefined"==typeof JsDiff?o.a.ajax({method:"GET",url:Label.staticServePath+"/js/lib/diff2html/diff2html.min.js",dataType:"script",cache:!0}).done(function(){window.$=o.a,window.jQuery=o.a,n()}):n()}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(19),o=n.n(a),i=n(0),r=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(t){if(t<1)return!1;if("0"!==Label.userNotifyStatus)return!1;if(!("Notification"in window))return!1;if(void 0===("undefined"==typeof ServiceWorkerRegistration?"undefined":s(ServiceWorkerRegistration)))return!1;if(!("showNotification"in ServiceWorkerRegistration.prototype))return console.warn("Notifications aren't supported."),!1;function n(e){var t=new Notification(Label.symphonyLabel,{body:Label.desktopNotificationTemplateLabel.replace("${count}",e),icon:Label.staticServePath+"/images/faviconH.png"});t.onclick=t.onerror=function(){window.location.href=Label.servePath+"/notifications"}}"granted"===Notification.permission?n(t):"denied"!==Notification.permission&&Notification.requestPermission(function(e){"granted"===e&&n(t)})}var l=function(e,a){try{if(!Label.isLoggedIn&&-1===location.pathname.indexOf("/article/"))return;var t=new o.a(Label.userChannelURL,null,{reconnectInterval:1e4,maxReconnectAttempts:1});if(t.onopen=function(){setInterval(function(){t.send('{"command": "hb"}')},3e5)},t.onmessage=function(e){var t=JSON.parse(e.data);switch(t.command){case"comment":a&&a.comment&&a.comment(t);break;case"articleHeat":a&&a.articleHeat&&a.articleHeat(t);break;case"refreshNotification":if(!Label.isLoggedIn)return;r.a.ajax({url:Label.servePath+"/notifications/unread/count",type:"GET",cache:!1,success:function(e){a&&a.refreshNotification&&a.refreshNotification(e);var t=localStorage.getItem("notifyTime"),n=localStorage.getItem("notifyCnt");!n||parseInt(n)<e.unreadNotificationCnt?(c(e.unreadNotificationCnt),localStorage.setItem("notifyCnt",e.unreadNotificationCnt),localStorage.setItem("notifyTime",(new Date).getTime())):36e5<(new Date).getTime()-t&&(c(e.unreadNotificationCnt),localStorage.setItem("notifyTime",(new Date).getTime()))}});break;case"chat":a&&a.chat&&a.chat(t)}},!(0!==e.length&&"IntersectionObserver"in window&&Label.isLoggedIn))return!1;var n=[],i=new IntersectionObserver(function(e){e.forEach(function(e){(void 0===e.isIntersecting?0!==e.intersectionRatio:e.isIntersecting)&&!e.target.getAttribute("data-viewed")&&(n.push(e.target.getAttribute("id")),e.target.setAttribute("data-viewed","true"))})});e.each(function(){i.observe(this)}),setInterval(function(){0!==n.length&&(t.send(JSON.stringify({command:"addCmtViews",commentIds:n.toString()})),n=[])},5e3)}catch(e){console.log("ws error: ",e)}}},function(k,x,L){var O;!function(i,u){"use strict";var f="function",e="undefined",t="model",n="name",a="type",o="vendor",r="version",s="architecture",c="console",l="mobile",d="tablet",m="smarttv",h="wearable",p={extend:function(e,t){var n={};for(var a in e)t[a]&&t[a].length%2==0?n[a]=t[a].concat(e[a]):n[a]=e[a];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:u},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var n,a,i,o,r,s,c=0;c<t.length&&!r;){var l=t[c],d=t[c+1];for(n=a=0;n<l.length&&!r;)if(r=l[n++].exec(e))for(i=0;i<d.length;i++)s=r[++a],"object"==typeof(o=d[i])&&0<o.length?2==o.length?typeof o[1]==f?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?typeof o[1]!=f||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):u:this[o[0]]=s?o[1].call(this,s,o[2]):u:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):u):this[o]=s||u;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var a=0;a<t[n].length;a++)if(p.has(t[n][a],e))return"?"===n?u:n}else if(p.has(t[n],e))return"?"===n?u:n;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,r],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],r],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],r],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[n,r],[/(konqueror)\/([\w\.]+)/i],[[n,"Konqueror"],r],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],r],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[n,"Edge"],r],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],r],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],r],[/(focus)\/([\w\.]+)/i],[[n,"Firefox Focus"],r],[/(opt)\/([\w\.]+)/i],[[n,"Opera Touch"],r],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],r],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],r],[/(windowswechat qbcore)\/([\w\.]+)/i],[[n,"WeChat(Win) Desktop"],r],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],r],[/(brave)\/([\w\.]+)/i],[[n,"Brave"],r],[/(qqbrowserlite)\/([\w\.]+)/i],[n,r],[/(QQ)\/([\d\.]+)/i],[n,r],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,r],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[n,r],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[n,r],[/(MetaSr)[\/\s]?([\w\.]+)/i],[n],[/(LBBROWSER)/i],[n],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[r,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[r,[n,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[n,r],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[r,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],r],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],r],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[r,[n,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[n,"Sailfish Browser"],r],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,r],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],r],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],r],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],r],[/fxios\/([\w\.-]+)/i],[r,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[r,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[r,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],r],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[r,b.str,v.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[n,r],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],r],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,r]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[s,p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[t,o,[a,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[t,[o,"Apple"],[a,d]],[/(apple\s{0,1}tv)/i],[[t,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,t,[a,d]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[t,[o,"Amazon"],[a,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[t,b.str,v.device.amazon.model],[o,"Amazon"],[a,l]],[/android.+aft([bms])\sbuild/i],[t,[o,"Amazon"],[a,m]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[t,o,[a,l]],[/\((ip[honed|\s\w*]+);/i],[t,[o,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,t,[a,l]],[/\(bb10;\s(\w+)/i],[t,[o,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[t,[o,"Asus"],[a,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[t,"Xperia Tablet"],[a,d]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[t,[o,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,t,[a,c]],[/android.+;\s(shield)\sbuild/i],[t,[o,"Nvidia"],[a,c]],[/(playstation\s[34portablevi]+)/i],[t,[o,"Sony"],[a,c]],[/(sprint\s(\w+))/i],[[o,b.str,v.device.sprint.vendor],[t,b.str,v.device.sprint.model],[a,l]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[o,[t,/_/g," "],[a,l]],[/(nexus\s9)/i],[t,[o,"HTC"],[a,d]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[t,[o,"Huawei"],[a,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,t,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[t,[o,"Microsoft"],[a,c]],[/(kin\.[onetw]{3})/i],[[t,/\./g," "],[o,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[t,[o,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[t,[o,"Motorola"],[a,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,p.trim],[t,p.trim],[a,m]],[/hbbtv.+maple;(\d+)/i],[[t,/^/,"SmartTV"],[o,"Samsung"],[a,m]],[/\(dtv[\);].+(aquos)/i],[t,[o,"Sharp"],[a,m]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],t,[a,d]],[/smart-tv.+(samsung)/i],[o,[a,m],t],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[o,"Samsung"],t,[a,l]],[/sie-(\w*)/i],[t,[o,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[o,"Nokia"],t,[a,l]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[t,[o,"Acer"],[a,d]],[/android.+([vl]k\-?\d{3})\s+build/i],[t,[o,"LG"],[a,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],t,[a,d]],[/(lg) netcast\.tv/i],[o,t,[a,m]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[t,[o,"LG"],[a,l]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[o,t,[a,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[t,[o,"Lenovo"],[a,d]],[/(lenovo)[_\s-]?([\w-]+)/i],[o,t,[a,l]],[/linux;.+((jolla));/i],[o,t,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[o,t,[a,h]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,t,[a,l]],[/crkey/i],[[t,"Chromecast"],[o,"Google"]],[/android.+;\s(glass)\s\d/i],[t,[o,"Google"],[a,h]],[/android.+;\s(pixel c)[\s)]/i],[t,[o,"Google"],[a,d]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[t,[o,"Google"],[a,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[t,/_/g," "],[o,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[t,/_/g," "],[o,"Xiaomi"],[a,d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[t,[o,"Meizu"],[a,l]],[/(mz)-([\w-]{2,})/i],[[o,"Meizu"],t,[a,l]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[t,[o,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[t,[o,"RCA"],[a,d]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[t,[o,"Dell"],[a,d]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[t,[o,"Verizon"],[a,d]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[o,"Barnes & Noble"],t,[a,d]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[t,[o,"NuVision"],[a,d]],[/android.+;\s(k88)\sbuild/i],[t,[o,"ZTE"],[a,d]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[t,[o,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[t,[o,"Swiss"],[a,d]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[t,[o,"Zeki"],[a,d]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[o,"Dragon Touch"],t,[a,d]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[t,[o,"Insignia"],[a,d]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[t,[o,"NextBook"],[a,d]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[o,"Voice"],t,[a,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[o,"LvTel"],t,[a,l]],[/android.+;\s(PH-1)\s/i],[t,[o,"Essential"],[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[t,[o,"Envizen"],[a,d]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[o,t,[a,d]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[t,[o,"MachSpeed"],[a,d]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[o,t,[a,d]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[t,[o,"Rotor"],[a,d]],[/android.+(KS(.+))\s+build/i],[t,[o,"Amazon"],[a,d]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[o,t,[a,d]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,p.lowerize],o,t],[/[\s\/\(](smart-?tv)[;\)]/i],[[a,m]],[/(android[\w\.\s\-]{0,9});.+build/i],[t,[o,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[r,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,r],[/rv\:([\w\.]{1,9}).+(gecko)/i],[r,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,r],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[r,b.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[r,b.str,v.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],r],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[n,r],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[n,"Symbian"],r],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],r],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[n,r],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],r],[/(sunos)\s?([\w\.\d]*)/i],[[n,"Solaris"],r],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[n,r],[/(haiku)\s(\w+)/i],[n,r],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[r,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[r,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[n,r]]},w=function(e,t){if("object"==typeof e&&(t=e,e=u),!(this instanceof w))return new w(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),a=t?p.extend(g,t):g;return this.getBrowser=function(){var e={name:u,version:u};return b.rgx.call(e,n,a.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:u};return b.rgx.call(e,n,a.cpu),e},this.getDevice=function(){var e={vendor:u,model:u,type:u};return b.rgx.call(e,n,a.device),e},this.getEngine=function(){var e={name:u,version:u};return b.rgx.call(e,n,a.engine),e},this.getOS=function(){var e={name:u,version:u};return b.rgx.call(e,n,a.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};w.VERSION="0.7.20",w.BROWSER={NAME:n,MAJOR:"major",VERSION:r},w.CPU={ARCHITECTURE:s},w.DEVICE={MODEL:t,VENDOR:o,TYPE:a,CONSOLE:c,MOBILE:l,SMARTTV:m,TABLET:d,WEARABLE:h,EMBEDDED:"embedded"},w.ENGINE={NAME:n,VERSION:r},w.OS={NAME:n,VERSION:r},typeof x!=e?(typeof k!=e&&k.exports&&(x=k.exports=w),x.UAParser=w):(O=function(){return w}.call(x,L,x,k))===u||(k.exports=O);var y=i&&(i.jQuery||i.Zepto);if(typeof y!=e&&!y.ua){var _=new w;y.ua=_.getResult(),y.ua.get=function(){return _.getUA()},y.ua.set=function(e){_.setUA(e);var t=_.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this)},,function(e,t,n){"use strict";n.r(t);function a(e,t){return Math.floor(Math.random()*(t-e)+e)}function i(e){var t='<li><div class="fn__flex">';return t+='<a rel="nofollow" href="'.concat(Label.servePath,"/member/").concat(e.ycyAuthorName,'" class="fn__flex-center">\n        <div class="avatar-small avatar header__avatar" style="background-image: url(').concat(e.ycyAuthorThumbnailURL,');"></div>\n    </a><div class="fn__flex-1 vditor-reset">').concat(e.ycyContent,'</div>\n   <span class="fn__pointer fn__flex-center fn__flex-inline ').concat(0===e.vote?"ft__red":"ft__fade",'" data-id="').concat(e.oId,'"><div class="fn__space5"></div><span>').concat(0===e.ycyGoodCnt?"":e.ycyGoodCnt,'</span><div class="fn__space5"></div><svg><use xlink:href="#iconHeart"></use></svg></span>\n</div></li>')}function o(){function e(){s.a.ajax({url:"".concat(Label.servePath,"/ycys?ycyURL=").concat(encodeURIComponent(window.location.href),"&p=1"),type:"GET",success:function(e){if(0===e.sc){if(!e.show)return;n=!0;var t="<ul>";e.ycys.forEach(function(e){t+=i(e)}),t+='</ul><div class="fn__clear">',1<e.pagination.paginationPageCount&&(t+='<button class="btn next" data-p="1">'.concat(Label.nextPageLabel,"</button>")),t+='<button class="btn close" data-p="1">'.concat(Label.closeLabel,'</button>\n<div class="fn__left">可以留下任何关于当前 URL 的文字<br>让每个成功的 URL 背后都有一个更大的世界 🌌</div>\n</div>'),Object(c.a)({width:768<s()(window).width()?748:s()(window).width()-40,height:s()(window).height()-80,title:'<div class="form"><input class="input" style="width: 100%" type="text" placeholder="'.concat(Label.YCYLabel,'"/></div>'),className:"dialog--ycy",content:t}),s()(".dialog input").keypress(function(e){if(Label.isLoggedIn){if(13===e.keyCode){var t=s()(this);t.attr("disabled","disabled"),s.a.ajax({url:"".concat(Label.servePath,"/ycy"),type:"POST",headers:{csrfToken:Label.csrfToken},data:encodeURIComponent(JSON.stringify({ycyURL:encodeURIComponent(window.location.href),ycyContent:t.val()})),success:function(e){0===e.sc?(t.val(""),s()(".dialog ul").prepend(i(e.ycy)),Object(f.a)(),Object(f.b)(),Object(m.b)(),Object(m.c)(),Object(m.a)()):Object(d.a)(e.msg),t.removeAttr("disabled")}})}}else Object(u.a)()}),s()(".dialog button.next").click(function(){var n=s()(this);n.attr("disabled","disabled");var a=n.data("p")+1;s.a.ajax({url:"".concat(Label.servePath,"/ycys?ycyURL=").concat(encodeURIComponent(window.location.href),"&p=").concat(a),type:"GET",success:function(e){if(0===e.sc){n.data("p",a);var t="";e.ycys.forEach(function(e){t+=i(e)}),s()(".dialog ul li").last().after(t),Object(f.a)(),Object(f.b)(),Object(m.b)(),Object(m.c)(),Object(m.a)(),e.pagination.paginationPageCount>=a&&n.remove()}else Object(d.a)(e.msg);n.removeAttr("disabled")}})}),s()(".dialog button.close").click(function(){s()(".dialog").remove()}),s()(".dialog").on("click",".fn__pointer",function(){if(Label.isLoggedIn){var t=s()(this);"disabled"===t.attr("disabled")||t.hasClass("ft__red")||(t.attr("disabled","disabled"),s.a.ajax({url:"".concat(Label.servePath,"/vote/up/ycy"),type:"POST",headers:{csrfToken:Label.csrfToken},data:JSON.stringify({dataId:t.data("id")}),success:function(e){0===e.sc?t.addClass("ft__red").find("span").text((parseInt(t.find("span").text())||0)+1):Object(d.a)(e.msg),t.removeAttr("disabled")}}))}else Object(u.a)()}),Object(f.a)(),Object(f.b)(),Object(m.b)(),Object(m.c)(),Object(m.a)()}else Object(d.a)(e.msg)}})}var n=!1,t=setTimeout(function(){e()},a(18e4,6e5));document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&clearTimeout(t),"visible"!==document.visibilityState||n||(t=setTimeout(function(){e()},a(18e4,6e5)))})}function l(){navigator.serviceWorker.ready.then(function(e){e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length),i=0;i<n.length;++i)a[i]=n.charCodeAt(i);return a}("BMnmI40pZI1Ok7bIpldl6GRqkCX4NYkyDz0UxTWhZ63qz3nb3wzLtPilxTaDbadDjRtrcDD9is4xTYXK-k2hyIE")}).then(function(e){return h(e)}).catch(function(e){"denied"===Notification.permission?console.warn("Permission for Notifications was denied"):console.error("Unable to subscribe to push.",e)})})}var r=n(0),s=n.n(r),c=(n(22),n(5)),d=n(1),u=n(4),f=n(2),m=n(3),h=function(e){return fetch(Label.servePath+"/notifications/web-push/subscription",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},p=n(14),b=n(8),v=n(13),g=(n(21),n(11)),w=function(o){""!==o.val().trim()?s.a.ajax({url:Label.servePath+"/search/quick?q="+o.val(),cache:!0,success:function(e){if(0===e.code){var t="";e.data.articles.forEach(function(e){t+='<a href="'.concat(e.articlePermalink,'" class="item">\n    <b>').concat(e.articleTitle,'</b>\n    <div class="quick-search__desc">').concat(e.articleContent,"</div>\n</a>")}),""===t&&(t='<div class="ft__smaller ft__center ft__fade" style="margin-top: 15px">'.concat(Label.notFoundPostLabel,"</div>"));var n="";e.data.users.forEach(function(e){n+='<a href="'.concat(e.userHomeURL,'" class="item">\n    <div class="fn__flex">\n      <img src="').concat(e.userAvatarURL,'" class="avatar fn__flex-center"/>\n      <div>').concat(e.userName,"</div>\n    </div>\n</a>")}),""===n&&(n='<div class="ft__smaller ft__center ft__fade">'.concat(Label.notFoundUserLabel,"</div>"));var a="";e.data.tags.forEach(function(e){a+='<a href="'.concat(e.tagURL,'" class="item">').concat(e.tagTitle,"</a>")}),""===a&&(a='<div class="ft__smaller ft__center ft__fade">'.concat(Label.notFoundTagLabel,"</div>"));var i='<div class="fn__flex quick-search__more">\n  <span class="fn__flex-1"></span>\n  <a href="'.concat(Label.servePath,'/search" class="ft__blue">').concat(Label.advanceSearchLabel,'</a>\n</div>\n<div class="fn__flex quick-search__list">\n  <div class="quick-search__post">\n      ').concat(t,'\n  </div>\n  <div class="quick-search__split"></div>\n  <div class="fn__flex-1">\n    ').concat(n,"\n    <hr>\n    ").concat(a,"\n  </div>\n</div>");1===o.next().length?o.next().html(i):o.after('<div class="quickSearchPanel quick-search__panel fn__layer fn__layer--static">'.concat(i,"</div>"))}else Object(d.a)(e.msg)}}):o.next().html('<div class="fn__flex quick-search__more">\n  <span class="fn__flex-1"></span>\n  <a href="'.concat(Label.servePath,'/search" class="ft__blue">').concat(Label.advanceSearchLabel,'</a>\n</div>\n<div class="fn__flex quick-search__list">\n  <div class="quick-search__post">\n      <div class="ft__smaller ft__center ft__fade" style="margin-top: 15px">').concat(Label.notFoundPostLabel,'</div>\n  </div>\n  <div class="quick-search__split"></div>\n  <div class="fn__flex-1">\n    <div class="ft__smaller ft__center ft__fade">').concat(Label.notFoundUserLabel,'</div>\n    <hr>\n    <div class="ft__smaller ft__center ft__fade">').concat(Label.notFoundTagLabel,"</div>\n  </div>\n</div>"))},y=n(6);s()(document).ready(function(){s()("body").click(function(e){var t=s()(e.target);1===t.closest("details-menu").length&&t.closest(".details").removeAttr("open"),0===t.closest(".details").length&&s()(".details").removeAttr("open")}),-1<navigator.userAgent.indexOf("Edge")&&s()("body").on("click",".details",function(){var e=s()(this);e.attr("open")?e.removeAttr("open"):e.attr("open","")}),s()("body").on("click",".details summary",function(){s()(".details").removeAttr("open")}),Label.isLoggedIn&&Object(g.a)(s()(".quickSearchInput"),function(e){w(e)},function(e,t){window.location=e.find(".item--current").attr("href")||Label.servePath+"/search?q="+t.val()}),(-1<navigator.userAgent.indexOf("MSIE")||/Trident.*rv[ :]*11\./.test(navigator.userAgent))&&Object(c.a)({title:Label.killBrowserTitleLabel,content:Label.killBrowserLabel,height:345,width:600}),-1<navigator.userAgent.indexOf("iPad")&&s()(window).width()<1024&&Object(c.a)({title:Label.useHorizontalScreenLabel,content:'<svg style="height: 100px;width: 100px;display: block;margin: 50px auto"><use xlink:href="#iconPad"></use></svg>\n<div class="ft__center ft__smaller ft__gray">'.concat(Label.iPadTipLabel,"</div>"),height:345,width:600}),o(),"http:"===location.protocol||!1 in navigator||void 0===navigator.serviceWorker||!1 in window||!1 in window||-1<navigator.userAgent.toLowerCase().indexOf("micromessenger")||navigator.serviceWorker.getRegistrations().then(function(e){var t=!1,n=Label.version.replace(/\./g,""),a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var c=r.value;t=!0,c.active.scriptURL!==Label.servePath+"/sw.min.js?"+n&&c.unregister()}}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}t||navigator.serviceWorker.register("/sw.min.js?"+n,{scope:"/"}).then(function(){!1 in window?console.warn("Push messaging isn't supported."):navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){e?h(e):l()}).catch(function(e){console.warn("Error during getSubscription()",e)})})})}),Object(f.a)(),Object(f.b)(),Object(d.g)(),Object(d.d)(),function(){if(!(Label.adGitHubRepo.length<=2)){var o=JSON.parse(Label.adGitHubRepo);s()(".githubAD").each(function(e,t){var n=s()(t),a="";o.language&&(a='<span class="fn__flex-inline">\n                <svg style="height: 14px; width: 14px"><use xlink:href="#iconFeed"></use></svg>\n                <span class="fn__space5"></span>'.concat(o.language,'\n                <span class="fn__space5"></span><span class="fn__space5"></span>\n              </span>'));var i='<div style="margin:4px 4px 7px">\n    <a href="'.concat(Label.servePath,"/forward?goto=").concat(decodeURIComponent(o.html_url),'" \n    class="link-card fn__flex').concat("square"===n.data("type")?" link-card--square":"",'"\n    style="margin: 0" target="_blank">\n        <span class="fn__flex-1 link-card__info">\n            <span class="link-card__title fn__flex-inline">\n                <svg class="fn__shrink" style="height: 14px; width: 14px;flex-shrink: 0;margin: 5px;"><use xlink:href="#iconGithub"></use></svg>\n               <span class="fn__space5"></span>').concat(o.full_name,'\n            </span>\n            <span class="link-card__abstract">\n            ').concat(o.description||"",'\n            </span>\n            <span class="ft__blue ft__smaller">\n              ').concat(a,'\n              <span class="fn__flex-inline">\n                <svg style="height: 14px; width: 14px"><use xlink:href="#iconStar"></use></svg>\n               <span class="fn__space5"></span>').concat(o.stargazers_count,'\n              </span>\n            </span>\n        </span>\n        <span class="link-card__image" style="background-image: url(').concat(o.avatar,')"></span>\n    </a>\n</div>');n.html(i)})}}(),Object(f.c)(),s()("#comments").length<1&&Object(b.c)(),Object(p.b)(s()(".quickSearchInput"),".hotkey > ","hotkey--focus"),Object(b.e)(),Object(b.d)(),Object(b.b)(),s()("#signOut").click(function(){Object(u.f)()}),s()("body").on("click",".commonGoLogin",function(){Object(u.a)()}),s()("body").on("click",".commonGoRegister",function(){Object(u.b)()}),Object(v.a)(s()("#breezemoonPostBtn"),s()("#breezemoonInput"));var e=location.search.split("r=")[1];e&&sessionStorage.setItem("r",e.split("&")[0]),function(){var t=s()("#tagArticlesSharePanel");0!==t.length&&s()("#tagArticlesShareBtn").click(function(){var e=s()(this);t.html('<div class="fn__flex share">\n  <input type="text" class="input fn__flex-1" readonly value="'.concat(e.data("shareurl"),'"/>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to QQZone" data-type="qqz">\n    <svg class="share__svg share__svg--qq"><use xlink:href="#iconQQZ"></use></svg></span>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to WeiBo" data-type="weibo">\n    <svg class="share__svg share__svg--weibo"><use xlink:href="#iconWeibo"></use></svg></span>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to Twitter" data-type="twitter">\n    <svg class="share__svg share__svg--twitter"><use xlink:href="#iconTwitter"></use></svg></span>\n  <details class="details fn__flex-center">\n    <summary>\n      <div class="vditor-tooltipped vditor-tooltipped__nw" aria-label="Share to WeChat" data-type="wechat">\n        <svg class="share__svg share__svg--wechat"><use xlink:href="#iconWechat"></use></svg></div>\n    </summary>\n    <details-menu class="share__details fn__layer">\n        <div class="item"><div class="share__qr"></div></div>\n    </details-menu>\n  </details>\n</div>')).slideDown(),Object(y.c)(e,t)})}()})},,,function(e,t,n){var a,i;void 0===(i="function"==typeof(a=function(){var r={version:"0.2.0"},s=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function c(e,t,n){return e<t?t:n<e?n:e}function l(e){return 100*(-1+e)}r.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(s[t]=n);return this},r.status=null,r.set=function(t){var e=r.isStarted();t=c(t,s.minimum,1),r.status=1===t?null:t;var n=r.render(!e),a=n.querySelector(s.barSelector),i=s.speed,o=s.easing;return n.offsetWidth,d(function(e){""===s.positionUsing&&(s.positionUsing=r.getPositioningCSS()),u(a,function(e,t,n){var a;a="translate3d"===s.positionUsing?{transform:"translate3d("+l(e)+"%,0,0)"}:"translate"===s.positionUsing?{transform:"translate("+l(e)+"%,0)"}:{"margin-left":l(e)+"%"};return a.transition="all "+t+"ms "+n,a}(t,i,o)),1===t?(u(n,{transition:"none",opacity:1}),n.offsetWidth,setTimeout(function(){u(n,{transition:"all "+i+"ms linear",opacity:0}),setTimeout(function(){r.remove(),e()},i)},i)):setTimeout(e,i)}),this},r.isStarted=function(){return"number"==typeof r.status},r.start=function(){r.status||r.set(0);var e=function(){setTimeout(function(){r.status&&(r.trickle(),e())},s.trickleSpeed)};return s.trickle&&e(),this},r.done=function(e){return e||r.status?r.inc(.3+.5*Math.random()).set(1):this},r.inc=function(e){var t=r.status;return t?("number"!=typeof e&&(e=(1-t)*c(Math.random()*t,.1,.95)),t=c(t+e,0,.994),r.set(t)):r.start()},r.trickle=function(){return r.inc(Math.random()*s.trickleRate)},function(){var t=0,n=0;r.promise=function(e){return e&&"resolved"!==e.state()&&(0===n&&r.start(),t++,n++,e.always(function(){0===--n?(t=0,r.done()):r.set((t-n)/t)})),this}}(),r.render=function(e){if(r.isRendered())return document.getElementById("nprogress");f(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=s.template;var n,a=t.querySelector(s.barSelector),i=e?"-100":l(r.status||0),o=document.querySelector(s.parent);return u(a,{transition:"all 0 linear",transform:"translate3d("+i+"%,0,0)"}),s.showSpinner||(n=t.querySelector(s.spinnerSelector))&&m(n),o!=document.body&&f(o,"nprogress-custom-parent"),o.appendChild(t),t},r.remove=function(){t(document.documentElement,"nprogress-busy"),t(document.querySelector(s.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&m(e)},r.isRendered=function(){return!!document.getElementById("nprogress")},r.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var d=function(){var t=[];function n(){var e=t.shift();e&&e(n)}return function(e){t.push(e),1==t.length&&n()}}(),u=function(){var o=["Webkit","O","Moz","ms"],t={};function a(e){return e=function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}(e),t[e]||(t[e]=function(e){var t=document.body.style;if(e in t)return e;var n,a=o.length,i=e.charAt(0).toUpperCase()+e.slice(1);for(;a--;)if((n=o[a]+i)in t)return n;return e}(e))}function r(e,t,n){t=a(t),e.style[t]=n}return function(e,t){var n,a,i=arguments;if(2==i.length)for(n in t)void 0!==(a=t[n])&&t.hasOwnProperty(n)&&r(e,n,a);else r(e,i[1],i[2])}}();function i(e,t){var n="string"==typeof e?e:o(e);return 0<=n.indexOf(" "+t+" ")}function f(e,t){var n=o(e),a=n+t;i(n,t)||(e.className=a.substring(1))}function t(e,t){var n,a=o(e);i(e,t)&&(n=a.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function o(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function m(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return r})?a.call(t,n,t,e):a)||(e.exports=i)},,function(e,t,n){"use strict";var a=n(0),r=n.n(a),c={support:{pjax:window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),storage:!!window.localStorage},toInt:function(e){return parseInt(e)},stack:{},getTime:function(){return 1*new Date},getRealUrl:function(e){return e=(e=(e||"").replace(/\#.*?$/,"")).replace("?pjax=true&","?").replace("?pjax=true","").replace("&pjax=true","")},getUrlHash:function(e){return e.replace(/^[^\#]*(?:\#(.*?))?$/,"$1")},getLocalKey:function(e){var t="pjax_"+encodeURIComponent(e);return{data:t+"_data",time:t+"_time",title:t+"_title"}},removeAllCache:function(){if(c.support.storage)for(var e in localStorage)"pjax"===(e.split("_")||[""])[0]&&delete localStorage[e]},getCache:function(e,t,n){var a,i,o;if(t=c.toInt(t),e in c.stack){a=c.stack[e];var r=c.getTime();if(a.time+1e3*t>r)return a;delete c.stack[e]}else if(n&&c.support.storage){var s=c.getLocalKey(e);if(i=s.data,o=s.time,a=localStorage.getItem(i)){if(c.toInt(localStorage.getItem(o))+1e3*t>c.getTime())return{data:a,title:localStorage.getItem(s.title)};localStorage.removeItem(i),localStorage.removeItem(o),localStorage.removeItem(s.title)}}return null},setCache:function(e,t,n,a){var i,o=c.getTime();c.stack[e]={data:t,title:n,time:o},a&&c.support.storage&&(i=c.getLocalKey(e),localStorage.setItem(i.data,t),localStorage.setItem(i.time,o),localStorage.setItem(i.title,n))},removeCache:function(e){if(e=c.getRealUrl(e||location.href),delete c.stack[e],c.support.storage){var t=c.getLocalKey(e);localStorage.removeItem(t.data),localStorage.removeItem(t.time),localStorage.removeItem(t.title)}}},s=function(a){if(!(a=r.a.extend({selector:"",container:"",callback:function(){},filter:function(){}},a)).container||!a.selector)throw new Error("selector & container options must be set");r()("body").delegate(a.selector,"click",function(e){if(1<e.which||e.metaKey)return!0;var t=r()(this).attr("href");if("function"==typeof a.filter&&!0===a.filter.call(this,t,this))return!0;if(t===location.href)return!0;if(c.getRealUrl(t)==c.getRealUrl(location.href)){var n=c.getUrlHash(t);return n&&(location.hash=n,a.callback&&a.callback.call(this,{type:"hash"})),!0}e.preventDefault(),a=r.a.extend(!0,a,{url:t,element:this,push:!0}),s.request(a)})};s.xhr=null,s.options={},s.state={},s.defaultOptions={timeout:2e3,element:null,cache:86400,storage:!0,url:"",push:!0,show:"",title:"",titleSuffix:"",type:"GET",data:{pjax:!0},dataType:"html",callback:null,beforeSend:function(e){r()(s.options.container).trigger("pjax.start",[e,s.options]),e&&e.setRequestHeader("X-PJAX",!0)&&e.setRequestHeader("X-PJAX-Container",s.options.container)},error:function(){s.options.callback&&s.options.callback.call(s.options.element,{type:"error"}),location.href=s.options.url},complete:function(e){r()(s.options.container).trigger("pjax.end",[e,s.options])}},s.showFx={_default:function(e,t,n){this.html(e),t&&t.call(this,e,n)},fade:function(e,t,n){var a=this;n?(a.html(e),t&&t.call(a,e,n)):this.fadeOut(200,function(){a.html(e).fadeIn(200,function(){t&&t.call(a,e,n)})})}},s.showFn=function(e,t,n,a,i){var o=null;(o="function"==typeof e?e:(e in s.showFx||(e="_default"),s.showFx[e]))&&o.call(t,n,function(){""===location.hash&&window.scrollTo(0,0),a&&a.call(this,n,i)},i)},s.success=function(e,t){if(!0!==t&&(t=!1),s.html&&(e=r()(e).find(s.html).html()),-1!=(e||"").indexOf("<html"))return s.options.callback&&s.options.callback.call(s.options.element,{type:"error"}),location.href=s.options.url,!1;var n=r()(s.options.element).attr("pjax-title");if(!n){if(""==(n=s.options.title||"")&&s.options.element){var a=r()(s.options.element);n=a.attr("title")||a.text()}var i=e.match(/<title>(.*?)<\/title>/);i&&(n=i[1])}n&&-1==n.indexOf(s.options.titleSuffix)&&(n+=s.options.titleSuffix),document.title=n,s.state={container:s.options.container,timeout:s.options.timeout,cache:s.options.cache,storage:s.options.storage,show:s.options.show,title:n,url:s.options.oldUrl};var o=r.a.param(s.options.data);""!=o&&(s.state.url=s.options.url+(/\?/.test(s.options.url)?"&":"?")+o),s.options.push?(s.active||(history.replaceState(r.a.extend({},s.state,{url:null}),document.title),s.active=!0),history.pushState(s.state,document.title,s.options.oldUrl)):!1===s.options.push&&history.replaceState(s.state,document.title,s.options.oldUrl),s.options.showFn&&s.options.showFn(e,function(){s.options.callback&&s.options.callback.call(s.options.element,{type:t?"cache":"success"})},t),s.options.cache&&!t&&c.setCache(s.options.url,e,n,s.options.storage)},s.request=function(a){a.hasOwnProperty("data")&&(s.defaultOptions.data=a.data),a=r.a.extend(!0,s.defaultOptions,a);var e,i=r()(a.container);if(a.oldUrl=a.url,a.url=c.getRealUrl(a.url),r()(a.element).length&&(e=c.toInt(r()(a.element).attr("data-pjax-cache")))&&(a.cache=e),!0===a.cache&&(a.cache=86400),a.cache=c.toInt(a.cache),0===a.cache&&c.removeAllCache(),a.showFn||(a.showFn=function(e,t,n){s.showFn(a.show,i,e,t,n)}),s.options=a,s.options.success=s.success,a.cache&&(e=c.getCache(a.url,a.cache,a.storage)))return a.beforeSend(),a.title=e.title,s.success(e.data,!0),a.complete(),!0;s.xhr&&s.xhr.readyState<4&&(s.xhr.onreadystatechange=r.a.noop,s.xhr.abort()),s.xhr=r.a.ajax(s.options)};var i="state"in window.history,o=location.href;r()(window).bind("popstate",function(e){var t=!i&&location.href==o;if(i=!0,!t){var n=e.state;if(n&&n.container)if(r()(n.container).length){var a={url:n.url,container:n.container,push:null,timeout:n.timeout,cache:n.cache,storage:n.storage,title:n.title,element:null};s.request(a)}else window.location.href=location.href}}),c.support.pjax||((s=function(){return!0}).request=function(e){e&&e.url&&(location.href=e.url)}),"state"in r.a.Event.prototype||r.a.event.addProp("state"),t.a=s},,,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){performance.getEntriesByType("navigation")[0]&&"back_forward"===performance.getEntriesByType("navigation")[0].type&&window.location.reload()}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),w=n.n(a),i=n(23),o=n.n(i),r=n(25),s=n(3),c=n(2),l=n(6),d=n(1);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){w()("#comments").on("click",".commentMenuBtn",function(){if(Label.isLoggedIn){var t=w()(this);""===w.a.trim(t.closest("details").find("details-menu").html())&&"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/comment/action?id=").concat(t.closest("li").attr("id")),cache:!1,complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?t.closest("details").find("details-menu").html(e.responseJSON.data):Object(d.a)(e.responseJSON.msg)}}))}else Object(p.a)()}).on("click",".commentGoodBtn",function(){var e=w()(this);!function(e,t){"disabled"!==e.attr("disabled")&&(e.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/vote/up/comment"),type:"POST",cache:!1,data:JSON.stringify({dataId:t}),success:function(e){0===e.code?(document.getElementById(t).outerHTML=e.data.html,Object(c.b)(),Object(c.a)(),Object(s.b)(),Object(s.c)(),Object(s.a)(),Object(l.g)("via")):Object(d.a)(e.msg)},complete:function(){e.removeAttr("disabled")}}))}(e,e.closest("li").attr("id"))}).on("click",".comment2Btn",function(){if(w()(this).data("grant")){var e=w()(this).closest("li").find(".commentActionPanel");e.html('<div class="comment2__form">\n    <div class="fn__flex">\n      <input class="input" type="text" placeholder="'.concat(Label.comment2ErrorLabel,'">\n      <button class="comment2SubmitBtn btn btn--confirm">').concat(Label.submitLabel,'</button>\n    </div>\n    <div class="comment2__desc fn__flex-1">\n        ').concat(Label.comment2UseSceneLabel,"\n    </div>\n</div>")).slideDown(),e.find("input").focus()}else Object(d.a)(Label.sc403Label)}).on("click",".commentAdoptBtn",function(){var e=w()(this);!function(e,t,n){Object(d.c)(n,function(){"disabled"!==e.attr("disabled")&&(e.attr("disabled","disabled"),w.a.ajax({url:Label.servePath+"/comment/accept",type:"POST",headers:{csrfToken:Label.csrfToken},cache:!1,data:JSON.stringify({commentId:t}),success:function(e){0===e.code?window.location.reload():Object(d.a)(e.msg)},complete:function(){e.removeAttr("disabled")}}))})}(e,e.closest("li").attr("id"),e.data("tip"))}).on("click",".commentHistoryBtn",function(){Object(k.a)(w()(this).closest("li").attr("id"),"comment")}).on("click",".commentBadBtn",function(){var e=w()(this);!function(e,t,n){"disabled"!==e.attr("disabled")&&(e.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/vote/down/comment"),type:"POST",cache:!1,data:JSON.stringify({dataId:n}),success:function(e){0===e.code?(document.getElementById(n).outerHTML=e.data.html,Object(c.b)(),Object(c.a)(),Object(s.b)(),Object(s.c)(),Object(s.a)(),Object(l.g)("via")):Object(d.a)(e.msg)},complete:function(){e.removeAttr("disabled")}}))}(e,e.data("grant"),e.closest("li").attr("id"))}).on("click",".commentReportBtn",function(){!function(e){Label.isLoggedIn?(Object(_.a)({title:Label.reportLabel,width:500<w()(window).width()?500:w()(window).width()-40,height:500<w()(window).width()?450:362,content:'<div class="form fn__clear">\n<div class="fn__clear"><label><input type="radio" value="0" name="report" checked> '.concat(Label.spamADLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="1" name="report"> ').concat(Label.pornographicLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="2" name="report"> ').concat(Label.violationOfRegulationsLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="3" name="report"> ').concat(Label.allegedlyInfringingLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="4" name="report"> ').concat(Label.personalAttacksLabel,'</label></div>\n<div class="fn__clear"><label><input type="radio" value="49" name="report"> ').concat(Label.miscLabel,'</label></div>\n<br>\n<textarea id="reportTextarea" placeholder="').concat(Label.reportContentLabel,'" rows="3"></textarea><br><br>\n<button id="reportCommitBtn" class="fn__right btn btn--confirm">').concat(Label.reportLabel,"</button>\n</div>")}),w()("#reportCommitBtn").click(function(){var t=w()(this);"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/report"),type:"POST",cache:!1,data:encodeURIComponent(JSON.stringify({reportDataId:e,reportDataType:1,reportType:w()("input[name=report]:checked").val(),reportMemo:w()("#reportTextarea").val()})),complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.sc?(Object(d.a)(Label.reportSuccLabel),w()(".dialog").remove()):Object(d.a)(e.responseJSON.msg)}}))})):Object(p.a)()}(w()(this).data("oid"))}).on("click",".commentThankBtn",function(){var e=w()(this);!function(t,e,n){Object(d.c)(n,function(){"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),w.a.ajax({url:Label.servePath+"/comment/thank",type:"POST",headers:{csrfToken:Label.csrfToken},cache:!1,data:JSON.stringify({commentId:e}),success:function(e){0===e.code?(t.closest("li")[0].outerHTML=e.data.html,Object(c.b)(),Object(c.a)(),Object(s.b)(),Object(s.c)(),Object(s.a)(),Object(l.g)("via")):Object(d.a)(e.msg)},complete:function(){t.removeAttr("disabled")}}))})}(e,e.closest("li").attr("id"),e.data("tip"))}).on("click",".commentMenuBtn .commentShowEditorBtn",function(){var e=w()(this);Object(x.a)(e.closest("li").attr("id"),e.data("name"),e.data("avatar"))}).on("click",".commentRemoveBtn",function(){!function(n,a){Label.isLoggedIn?Object(d.c)(Label.confirmRemoveLabel,function(){w.a.ajax({url:Label.servePath+"/comment/"+n+"/remove",type:"POST",cache:!1,success:function(e){if(0===e.sc){w()("#"+n).remove();var t=w()(".articleCommentCnt");t.text(parseInt(t.first().text())-1||""),a&&a()}else Object(d.a)(e.msg)}})}):Object(p.a)()}(w()(this).closest("li").attr("id"),e&&e.removeCmt)}).on("click",".commentEditBtn",function(){var e=w()(this);Object(x.a)(e.closest("li").attr("id")),function(e,t){w.a.ajax({url:Label.servePath+"/comment/"+e+"/content",type:"GET",cache:!1,success:function(e){0===e.sc&&t(e)}})}(e.closest("li").attr("id"),function(e){window.commentEditor.setValue(e.commentContent),w()("#commentVisible").prop("checked",0!==e.commentVisible)})}).on("click",".commentHideBtn",function(){if(Label.isLoggedIn){var e=w()(this),t=e.closest("li").find(".commentActionPanel");"open"!==e.data("status")?(t.html('<div class="comment2__form">\n<div class="fn__flex">\n    <select class="select">\n        <option value="2">'.concat(Label.offTopicLabel,'</option>\n        <option value="3">').concat(Label.outdatedLabel,'</option>\n    </select>\n    <button class="commentHideSubmitBtn btn btn--confirm">').concat(Label.submitLabel,'</button>\n</div>\n<div class="comment2__desc"><a href="').concat(Label.link26,'" target="_blank">关于回帖折叠功能</a></div>\n</div>')).slideDown(),t.find("select").focus()):function(e,t){"disabled"!==e.attr("disabled")&&(e.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/comment/unhide"),type:"POST",cache:!1,headers:{csrfToken:Label.csrfToken},data:JSON.stringify({commentId:t}),success:function(e){0===e.code?(document.getElementById(t).outerHTML=e.data.html,Object(c.b)(),Object(c.a)(),Object(s.b)(),Object(s.c)(),Object(s.a)(),Object(l.g)("via")):Object(d.a)(e.msg)},complete:function(){e.removeAttr("disabled")}}))}(e,e.closest("li").attr("id"))}else Object(p.a)()}).on("click",".commentShareBtn",function(){var e=w()(this),t=e.closest("li").find(".commentActionPanel");t.html('\n<div class="fn__flex share">\n  <input type="text" class="input fn__flex-1" readonly value="'.concat(e.data("shareurl"),'"/>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to QQZone" data-type="qqz">\n    <svg class="share__svg share__svg--qq"><use xlink:href="#iconQQZ"></use></svg></span>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to WeiBo" data-type="weibo">\n    <svg class="share__svg share__svg--weibo"><use xlink:href="#iconWeibo"></use></svg></span>\n  <span class="vditor-tooltipped fn__flex-center vditor-tooltipped__n" aria-label="Share to Twitter" data-type="twitter">\n    <svg class="share__svg share__svg--twitter"><use xlink:href="#iconTwitter"></use></svg></span>\n  <details class="details fn__flex-center">\n    <summary>\n      <div class="vditor-tooltipped vditor-tooltipped__nw" aria-label="Share to WeChat" data-type="wechat">\n        <svg class="share__svg share__svg--wechat"><use xlink:href="#iconWechat"></use></svg></div>\n    </summary>\n    <details-menu class="share__details fn__layer">\n        <div class="item"><div class="share__qr"></div></div>\n    </details-menu>\n  </details>\n</div>')).slideDown(),Object(l.c)(e,t)})}function y(e,t){var n=e.split(O);3===n.length&&n.splice(0,0,"");var a=n[0],i=n[2].split("-"),o=n[3].split("-");if(i[0]=parseInt(i[0]),i[1]=parseInt(i[1]),o[0]=parseInt(o[0]),o[1]=parseInt(o[1]),a===C){for(var r=[],s=i[1];o[1],s<t.length;s++){if(i[1]===o[1]){t[s]=t[s].substring(0,i[0])+t[s].substr(o[0]);break}s===i[1]?t[s]=t[s].substr(0,i[0]):s===o[1]?(t[i[1]]+=t[s].substr(o[0]),t.splice(s,1)):r.push(s)}for(var c=0;c<r.length;c++)t.splice(r[c]-c,1)}else{var l=a.split(j)[0];""===a.split(j)[1]&&(t[i[1]]=t[i[1]].substring(0,i[0])+t[o[1]].substr(o[0]),t.splice(i[1]+1,o[1]-i[1])),void 0!==t[i[1]]?t[i[1]]=t[i[1]].substring(0,i[0])+l+t[i[1]].substr(i[0]):t[i[1]]=""}return t}function m(){if(w()("#articleRewardBtn").click(function(){Object(l.f)(Label.articleOId,function(){window.location.reload()})}),w()(".articleMore").click(function(){var e=w()(this),t=e.data("text");"fold"===e.data("type")?(w()(".articleHide").show(),e.html('<svg><use xlink:href="#iconChevronUp"></use></svg> '.concat(t?Label.foldLabel:"")).data("type","open")):(w()(".articleHide").hide(),e.html('<svg><use xlink:href="#iconChevronDown"></use></svg> '.concat(t?Label.openLabel:"")).data("type","fold"))}),Label.articleContent){var e=w()("#articleThought");!function(e,t,n,a){var i=e.split(S);""===i[i.length-1]&&i.pop();for(var o=parseInt(i[0].split(O)[1]),r=parseInt(i[i.length-1].split(O)[1]),s=Math.max(parseInt(i.length/20),2),c=0,l=0;c<i.length;c++)setTimeout(function(){w()(a).data("text")||w()(a).data("text","");var e=y(i[l++],w()(a).data("text").split(T)).join(T),t=e.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;").replace(/	/g,"&nbsp;&nbsp;&nbsp;&nbsp;");w()(a).data("text",e).html(t)},(i[c].split(O)[1]-o)/s);for(var d=0,u=(r-o)/s,f=setInterval(function(){u<=d?(t.width("100%"),n.css("left","100%"),clearInterval(f)):(d+=20,n.css("left",100*d/u+"%"),t.width(100*d/u+"%"))},20),m="",h="",p=0,b=0,v=0;b<i.length;b++){var g=y(i[v++],m.split(T)).join(T);h=g.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;").replace(/	/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),m=g,w()(a).html(h),p=Math.max(p,w()(a).height())}n.click(function(){Object(_.a)({title:Label.thoughtLabel,width:768<w()(window).width()?768:w()(window).width()-40,height:w()(window).height()-80,content:'<div class="vditor-reset">'.concat(h,"</div>")})}),w()(a).html(h).height(p).css("margin-bottom","15px").html("")}(Label.articleContent,e.find("span"),e.find("svg"),".articleContent")}}var h=n(8),p=n(4),_=n(5),b=(n(20),n(17)),v=(n(26),n(28)),g=n(15),k=n(16),x=n(12),L=n(14),O=String.fromCharCode(31),S=String.fromCharCode(30),j=String.fromCharCode(29),T=String.fromCharCode(10),C=String.fromCharCode(24),N=function(e){0!==e.length&&(e.attr("id")&&(location.hash="#"+e.attr("id")),w()(window).scrollTop(e[0].offsetTop),"comments"!==e.attr("id")&&(e.css({"background-color":"#9bbee0"}),setTimeout(function(){e.css({"background-color":"#FFF",transition:"all 3s cubic-bezier(0.56, -0.36, 0.58, 1)"})},100),setTimeout(function(){e.removeAttr("style")},3100)))},P={_initParticipantCmt:function(){w()(".article__participant").click(function(){var t=w()(this);w.a.ajax({url:"".concat(Label.servePath,"/comment/part/").concat(t.data("oid"),"/").concat(Label.articleOId),type:"GET",cache:!1,success:function(e){e.sc?(Object(_.a)({title:"".concat(t.find("div").attr("aria-name")).concat(Label.deReplyLabel),content:'<div class="list"><ul>'.concat(e.cmtTpl,"</ul></div>"),height:600,width:728}),Object(c.a)(),Object(c.b)(),Object(s.b)(),Object(s.c)(),Object(s.a)(),w()(".dialog__content .tooltipped__user").removeClass("tooltipped__user"),w()(".dialog__content .comment-action").remove(),document.querySelector(".dialog__content").scrollTop=0):Object(d.a)(e.msg)}})})},init:function(){f(),w()("#exchangeCmtModeBtn").click(function(){var e=0===parseInt(w()(this).data("mode"))?1:0;window.location.href=window.location.pathname+"?m="+e}),w()("#comments").on("click",".commentCloseBtn",function(){w()(this).closest(".commentActionPanel").hide(),w()(this).closest("ul").remove("")}).on("click",".commentOriginalBtn",function(){Object(l.i)(w()(this).data("ooid"),w()(this).closest("li").find(".commentOriginal"),w()(this))}).on("click",".commentShowReplyBtn",function(){var e=w()(this),t=e.closest("li").find(".commentActionPanel");Object(l.h)(e.closest("li").attr("id"),t,e)}).on("click",".commentShowMoreBtn",function(){var e=w()(this),t=1===e.closest(".commentOriginal").length,n=e.closest(".commentOriginal").find(".commentHide");t||(n=e.closest("li").find(".commentHide").filter(function(e,t){return 0===w()(t).closest(".commentOriginal").length})),"fold"===e.data("type")?(n.show(),e.html('<svg><use xlink:href="#iconChevronUp"></use></svg> '.concat(Label.foldLabel)).data("type","open")):(n.hide(),e.html('<svg><use xlink:href="#iconChevronDown"></use></svg> '.concat(Label.openLabel)).data("type","fold"))}).on("click",".commentHideSubmitBtn",function(){var e=w()(this);if("disabled"!==e.attr("disabled")){e.attr("disabled","disabled");var t=e.closest("li").attr("id");w.a.ajax({url:"".concat(Label.servePath,"/comment/hide"),type:"POST",cache:!1,headers:{csrfToken:Label.csrfToken},data:JSON.stringify({commentId:t,commentStatus:e.prev().val()}),success:function(e){0===e.code?(document.getElementById(t).outerHTML=e.data.html,Object(c.b)(),Object(c.a)(),Object(l.g)("via")):Object(d.a)(e.msg)},complete:function(){e.removeAttr("disabled")}})}}),function(i){var n='<div class="comment2__form">\n    <div class="fn__flex">\n      <input class="input" type="text" placeholder="'.concat(Label.comment2ErrorLabel,'">\n      <button class="comment2SubmitBtn btn btn--confirm">').concat(Label.submitLabel,'</button>\n    </div>\n    <div class="comment2__desc fn__flex-1">\n        ').concat(Label.comment2UseSceneLabel,"\n    </div>\n</div>");w()("#comments").on("click",".comment2Edit",function(){var t=w()(this).closest(".comment2Item");1!==t.find(".form").length?(t.find(".comment2Form").html(n),w.a.ajax({url:"".concat(Label.servePath,"/comment2/update/").concat(t.data("id")),success:function(e){0===e.sc?t.find("input").val(e.data.comment2Content).data("id",e.data.oId).focus():Object(d.a)(e.msg)}})):t.find(".form").remove()}).on("click",".comment2at",function(){var e=w()(this),t=e.closest(".comment2Item");0===t.find(".comment2__form").length?t.find(".comment2Form").html(n).find("input").val(e.text()).focus():t.find("input").focus()}).on("click",".comment2Up",function(){var t=w()(this);"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/vote/up/comment2"),type:"POST",headers:{csrfToken:Label.csrfToken},data:JSON.stringify({dataId:t.closest(".comment2Item").data("id")}),success:function(e){0===e.code?t.closest(".comment2Item")[0].outerHTML=e.data.html:Object(d.a)(e.msg)},complete:function(){t.removeAttr("disabled")}}))}).on("click",".comment2Thank",function(){var t=w()(this);Object(d.c)(t.data("tip"),function(){t.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/comment2/thank"),type:"POST",headers:{csrfToken:Label.csrfToken},data:JSON.stringify({comment2Id:t.closest(".comment2Item").data("id")}),success:function(e){0===e.code?(t.closest(".comment2Item")[0].outerHTML=e.data.html,Object(c.b)()):Object(d.a)(e.msg)},complete:function(){t.removeAttr("disabled")}})})}).on("click",".comment2Remove",function(){var t=w()(this);"disabled"!==t.attr("disabled")&&Object(d.c)(Label.confirmRemoveLabel,function(){t.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/comment2/").concat(t.closest(".comment2Item").data("id"),"/remove"),type:"POST",headers:{csrfToken:Label.csrfToken},success:function(e){0===e.sc?t.closest(".comment2Item").remove():Object(d.a)(e.msg)},complete:function(){t.removeAttr("disabled")}})})}).on("click",".comment2SubmitBtn",function(){var t=w()(this);if("disabled"!==t.attr("disabled")){t.attr("disabled","disabled");var n="POST",e="",a=JSON.stringify({commentId:t.closest("li").attr("id"),comment2Content:t.prev().val()});t.prev().data("id")&&(n="PUT",e="/"+t.prev().data("id"),a=JSON.stringify({comment2Content:t.prev().val()})),w.a.ajax({url:Label.servePath+"/comment2"+e,type:n,headers:{csrfToken:Label.csrfToken},data:a,success:function(e){0===e.code?("PUT"===n?Label.comment2ReviewRequired?(Object(d.a)(Label.reviewingLabel),t.closest(".comment2Item").remove()):t.closest(".comment2Item")[0].outerHTML=e.data.html:(Label.comment2ReviewRequired?Object(d.a)(Label.reviewingLabel):t.closest("li").find(".comment2").append(e.data.html),1===t.closest(".comment2Form").length?t.closest(".comment2__form").remove():t.closest("li").find(".commentActionPanel").slideUp()),Object(c.b)(),Object(c.a)()):i?i(e,t):Object(d.a)(e.msg)},complete:function(){t.removeAttr("disabled")}})}}).on("keypress",".comment2__form input",function(e){13===e.keyCode&&w()(this).next().click()}).on("keydown",".comment2__form input",function(e){27===e.keyCode&&(1===w()(this).closest(".comment2Item").length?w()(this).closest(".comment2__form").remove():w()(this).closest("li").find(".commentActionPanel").slideUp())})}(),Object(x.b)(),this._initParticipantCmt(),w()("#commentGoBottom").click(function(){N(w()("#comments li:last"))});try{1===w()(window.location.hash).length&&N(w()(window.location.hash))}catch(e){console.log("bg fade error")}Object(r.a)({selector:"#comments .pagination a",container:"#comments",show:"",cache:!1,storage:!0,titleSuffix:"",callback:function(){Object(l.d)(Label.articleOId,Label.notificationCmtIds),Object(c.a)(),Object(c.b)(),Object(s.b)(),Object(s.c)(),Object(s.a)(),w()(".article__cover").height(Math.min(w()(window).outerHeight(),w()("#commentsPanel").outerHeight()))}}),o.a.configure({showSpinner:!1}),w()("#comments").bind("pjax.start",function(){o.a.start()}),w()("#comments").bind("pjax.end",function(){o.a.done()})}},I={_initUsersInteracts:function(){var e,t,o,r,s,c=w()('<div style="position: absolute;z-index: 130"></div>');c.hover(function(){w()(this).show(),clearTimeout(t)},function(){t=setTimeout(function(){c.hide()},200)}),w()("body").append(c).on("mouseover",".usersInteracts",function(){clearTimeout(t);var i=w()(this).closest(".usersInteracts");o=i.data("type"),r=i.data("oid"),s=i.data("kind"),e=setTimeout(function(){w.a.ajax({method:"GET",url:Label.servePath+"/users/interacts/".concat(s,"/").concat(o,"/").concat(r),cache:!0}).done(function(e){if(e.sc&&s===e.interacts&&o===e.type&&r===parseInt(e.dataId)&&0!==e.users.length){var t="";e.users.forEach(function(e){t+='<span class="tooltipped__n tooltipped" aria-label="'.concat(e.articleParticipantName,'"><a href="').concat(Label.servePath,"/member/").concat(e.articleParticipantName,'"\n                class="avatar-small" style="background-image: url(').concat(e.articleParticipantThumbnailURL,')"></a></span>')}),c.html('<div class="article__card">'.concat(t,"</div>"));var n=i[0].offsetTop-c.outerHeight()-3;w()(window).scrollTop()>n&&(n=i[0].offsetTop+i[0].offsetHeight);var a=i[0].offsetLeft;a+c.width()>w()(window).width()?c.css({left:"auto",right:"15px",top:n}).show():c.css({left:a,right:"auto",top:n}).show()}})},100)}).on("mouseout",".usersInteracts",function(){clearTimeout(e),t=setTimeout(function(){c.hide()},200)})},init:function(){if(Object(L.a)({rEvent:x.a,xrQuery:".hotkey .hotkey--focus .commentShowEditorBtn",xhQuery:".hotkey .hotkey--focus .commentThankBtn",xtQuery:".hotkey .hotkey--focus .commentGoodBtn",xdQuery:".hotkey .hotkey--focus .commentBadBtn",xcQuery:".hotkey .hotkey--focus .commentOriginalBtn",xmQuery:".hotkey .hotkey--focus .commentShowReplyBtn",xeQuery:".hotkey .hotkey--focus .commentEditBtn",xoQuery:".hotkey .hotkey--focus .commentRemoveBtn",xaLinkQuery:".hotkey .hotkey--focus .commentAdminBtn",vrQuery:"#articleRewardBtn",vhQuery:"#articleThankBtn",vtQuery:"#articleGoodBtn",vdQuery:"#articleBadBtn",viQuery:"#articleFollowBtn",vcQuery:"#articleCollectBtn",vlQuery:"#articleHistoryBtn",vsQuery:"#articleStickBtn",vmQuery:"#articleShareBtn",veLink:"".concat(Label.servePath,"/update?id=").concat(Label.articleOId),vaLink:"".concat(Label.servePath,"/admin/article/").concat(Label.articleOId)}),w()(".articleMenuBtn").click(function(){if(Label.isLoggedIn){var t=w()(this);""===w.a.trim(t.closest("details").find("details-menu").html())&&"disabled"!==t.attr("disabled")&&(t.attr("disabled","disabled"),w.a.ajax({url:"".concat(Label.servePath,"/article/action?id=").concat(Label.articleOId),cache:!1,complete:function(e){t.removeAttr("disabled"),0===e.responseJSON.code?(t.closest("details").find("details-menu").html(e.responseJSON.data),Object(g.a)()):Object(d.a)(e.responseJSON.msg)}}))}else Object(p.a)()}),Object(l.a)(),function(){function s(e,t){return["","作者："+e,"链接："+t,"来源："+Label.symphonyLabel,"协议：CC BY-SA 4.0 https://creativecommons.org/licenses/by-sa/4.0/"]}w()(".vditor-reset").on("copy",function(e){if(window.getSelection){var t=window.getSelection(),n=w()(this).data("author")||Label.articleAuthorName,a=w()(this).data("link")||location.href;if(!(t.toString().length<128)){var i=document.createElement("div");if(t.rangeCount)for(var o=0,r=t.rangeCount;o<r;++o)i.appendChild(t.getRangeAt(o).cloneContents());"object"===u(e.originalEvent.clipboardData)&&(""!==i.innerHTML&&e.originalEvent.clipboardData.setData("text/html",i.innerHTML+"<br>"+s(n,a).join("<br>")),i.remove(),e.originalEvent.clipboardData.setData("text/plain",t.toString()+"\n"+s(n,a).join("\n")),e.preventDefault())}}})}(),this.initToc(),this._initUsersInteracts(),Object(s.b)(),Object(s.c)(),Object(s.a)(),m(),Object(l.b)(w()("#articleAudio"),!0),70<document.querySelector("#articleMeta").scrollHeight){var t=w()("#articleMeta");w()(".articleParticipantsBtn.article__stats").addClass("article__stats--a fn__pointer"),w()(".articleParticipantsBtn").click(function(){var e=t.find(".meta__more").find("svg");e.hasClass("fn__deg--180")?(e.removeClass("fn__deg--180"),w()(".articleParticipantsBtn.meta__more").attr("aria-label",Label.moreLabel),t.height(38),t.find("br").remove()):(e.addClass("fn__deg--180"),t.css("height","auto"),w()(".article__participant:first").before("<br><br><br>"),w()(".articleParticipantsBtn.meta__more").attr("aria-label",Label.hideLabel))})}else w()(".articleParticipantsBtn:first").hide()},initToc:function(){if(!(w()(window).width()<=1140)){var i=w()("#articleToC");if(0===w()("#articleToC").length)return!1;w()(".article__cover, #articleToC").css({right:"auto",left:w()("#commentsPanel").offset().left+w()("#commentsPanel").outerWidth()}),w()(".article__cover").height(Math.min(w()(window).outerHeight(),w()("#commentsPanel").outerHeight()));var o=w()(".article-content [id^=toc]"),r=[];i.find("li").click(function(){"fold"===w()(".articleMore").data("type")&&w()(".articleMore").click();var e=w()(this);setTimeout(function(){i.find("li").removeClass("current"),e.addClass("current"),N(w()("#"+e.find("a").data("id")))},50)}),w()(window).scroll(function(){var e=w()(window).scrollTop();if(136<e&&e<w()(".article__body").outerHeight()){i.show(),r=[],o.each(function(){r.push({id:this.id,offsetTop:this.offsetTop})});for(var t=0,n=r.length;t<n;t++)if(e<r[t].offsetTop){i.find("li").removeClass("current");var a=0<t?t-1:0;i.find('a[data-id="'+r[a].id+'"]').parent().addClass("current");break}e>=r[r.length-1].offsetTop&&(i.find("li").removeClass("current"),i.find("li:last").addClass("current"))}else i.hide()}),w()(window).scroll()}}};Object(v.a)(),w()(document).ready(function(){Object(l.g)("via"),function(){try{Object(b.a)(w()("#comments > .list > ul > li"),{comment:function(e){if(w()("#comments .articleCommentCnt").text(parseInt(w()("#comments .articleCommentCnt").text()||0)+1),0===w()("#comments .list > ul > li").length&&w()("#comments > .module-header > .fn-none").show(),0===Label.userCommentViewMode?w()("#comments > .list > ul").append(e.cmtTpl):w()("#comments > .list > ul").prepend(e.cmtTpl),Object(l.g)("via"),e.isMyComment&&N(w()("#"+e.commentId)),""!==e.commentOriginalCommentId){var t=w()("#"+e.commentOriginalCommentId),n=t.find(".commentReplyBtn"),a=parseInt(w.a.trim(n.text())||0)+1;n.html("".concat(a," ").concat(Label.replyLabel)),t.find(".comment-replies ul").remove()}Object(c.a)(),Object(c.b)(),Object(s.b)(),Object(s.c)(),Object(s.a)()},articleHeat:function(a){var e=w()("#heatBar");if(1===e.length){var t=w()(".heat");"+"===a.operation?(e.append('<i class="point"></i>'),setTimeout(function(){t.width(w()(".heat").width()+3),e.find(".point").remove()},2e3)):(t.width(w()(".heat").width()-3),e.append('<i class="point-remove"></i>'),setTimeout(function(){e.find(".point-remove").remove()},2e3))}w()(".article-list__item h2 > a").each(function(){var e=w()(this).data("id");if(e&&(e=e.toString(),a.articleId===e)){var t=w()(this).closest("li"),n=t.find(".heat");"+"===a.operation?(t.append('<div class="fn-relative"><i class="point"></i></div>'),setTimeout(function(){n.width(n.width()+3),t.find(".point").parent().remove()},2e3)):(n.width(n.width()-3),t.append('<div class="fn-relative"><i class="point-remove"></i></div>'),setTimeout(function(){t.find(".point-remove").parent().remove()},2e3))}})},refreshNotification:function(e){Object(h.a)(e)},chat:function(e){var t=w()(".chats__list");0!==t.length&&e.data.chatFromName==w()("#sendChatBtn").data("name")&&(t.prepend('<div class="fn__flex chats__item">\n    <a href="'.concat(Label.servePath,"/member/").concat(e.data.chatFromName,'">\n        <div aria-name="').concat(e.data.chatFromName,'"\n             class="avatar tooltipped__user"\n             style="background-image: url(').concat(e.data.chatUserAvatarURL,')"></div>\n    </a>\n    <div class="chats__content">\n        <div class="chats__arrow"></div>\n        <div class="vditor-reset ft-13">\n            ').concat(e.data.chatContent,'\n        </div>\n        <div class="ft__smaller ft__fade fn__right">\n            ').concat(e.data.chatCreated,"\n        </div>\n    </div>\n</div>")),t.animate({scrollTop:0},500))}})}catch(e){console.log("websocket error: ",e)}}(),P.init(),I.init(),Object(l.d)(Label.articleOId,Label.notificationCmtIds)})}]);